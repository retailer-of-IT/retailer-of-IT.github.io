<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="apple-touch-icon" href="/icons-192.png">
  <link rel="manifest" href="/manifest.json">
  
  <meta name="generator" content="Hexo 6.0.0">

  
    <meta name="description" content="code,algorithm,games">
  

  

  
    <meta name="author" content="juanyi">
  

  

  

  <title>2021操作系统 | 倦倚的博客</title>

  

  
    <link rel="shortcut icon" href="/project/favicon.ico">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@1.1.3/index.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlightjs@9.16.2/styles/monokai.css">
  

  
<link rel="stylesheet" href="/project/css/style.css">

</head>
<body>
  <div class="root-container">
    
<!-- header container -->
<header class="header-container post">
  
    <div class="post-image" style="background-image: url(https://qiniu.sukoshi.xyz/src/images/68686407_p0.jpg)"></div>
  

  <!-- navbar -->
<nav class="navbar">
  <div class="navbar-content">
    <!-- logo -->
    <div class="navbar-logo">
      <a href="/project/">
        
          倦倚的博客
        
      </a>
    </div>
    <!-- link -->
    <div class="navbar-link">
      <div class="navbar-btn">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <ul class="navbar-list">
        
          <li class="navbar-list-item"><a href="/project/">首页</a></li>
        
          <li class="navbar-list-item"><a href="/project/links">友链</a></li>
        
          <li class="navbar-list-item"><a href="/project/about">关于</a></li>
        
      </ul>
    </div>
  </div>
</nav>

  
  

  
  

  
  

  
  

  
  
    <div class="header-content">
      <div class="post-text layout-block">
        <div class="layout-margin">
          <h1 class="title-wrap">2021操作系统</h1>
          <h2 class="title-sub-wrap">
            <strong>juanyi</strong>
            <span>发布于</span>
            <time  class="article-date" datetime="2022-01-03T05:31:23.000Z" itemprop="datePublished">2022-01-03</time>
          </h2>
          <ul class="wrap-list dark">
  
</ul>
          <ul class="wrap-list dark">
  
    <li><a href="/project/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/">🏷️ 专业课</a></li>
  
</ul>
        </div>
      </div>
    </div>
  

  
  
  
</header>

    <!-- 文章 -->

<!-- 文章内容 -->
<div class="body-container">
  <article class="content-container layout-block post-container">
    <div class="article-info">
      
      
      
      
      <section class="article-entry markdown-body layout-margin content-padding--large soft-size--large soft-style--box">
        <h2 id="Chapter-2：进程的描述与控制"><a href="#Chapter-2：进程的描述与控制" class="headerlink" title="#Chapter 2：进程的描述与控制"></a>#Chapter 2：进程的描述与控制</h2><h3 id="程序执行"><a href="#程序执行" class="headerlink" title="#程序执行"></a>#程序执行</h3><ul>
<li><p>程序顺序执行时的特征</p>
<ul>
<li><p>顺序性</p>
</li>
<li><p>封闭性</p>
</li>
<li><p>可再现性</p>
</li>
</ul>
</li>
<li><p>并发和并行</p>
<ul>
<li>并发：一组逻辑上互相独立的程序在执行时间上客观重叠，即一个还未结束，另一个已经开始。</li>
<li>并行：一组程序在同一物理时刻同时执行</li>
</ul>
</li>
<li><p>并发执行的特征</p>
<ul>
<li>间断性</li>
<li>失去封闭性</li>
<li>不可再现性</li>
</ul>
</li>
</ul>
<h3 id="进程"><a href="#进程" class="headerlink" title="#进程"></a>#进程</h3><ul>
<li>进程的特征<ul>
<li>动态性</li>
<li>独立性</li>
<li>并发性</li>
<li>异步性</li>
<li>结构化</li>
</ul>
</li>
</ul>
<ul>
<li>进程 = 程序 + 数据 + PCB<ul>
<li>PCB：由操作系统维护的用来记录进程相关信息和管理进程的数据结构<ul>
<li>进程标识符</li>
<li>调度信息</li>
<li>处理机状态</li>
<li>进程控制信息</li>
</ul>
</li>
<li>PCB的组织形式<ul>
<li>链表</li>
<li>索引表</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><strong>OS是根据PCB来对并发执行的进程进行控制和管理的。</strong></li>
</ul>
<ul>
<li><p>进程和程序的区别</p>
<ul>
<li><p>进程是动态的，程序是静态的</p>
</li>
<li><p>进程是暂时的，程序是永久的</p>
</li>
<li><p>进程和程序组成不同（进程三要素）</p>
</li>
<li><p>进程和程序的对应关系</p>
<ul>
<li>通过多次执行，一个程序可对应多个进程</li>
<li>通过调用关系，一个进程可包括多个程序（？）</li>
</ul>
</li>
<li><p>进程具有并行性，程序没有</p>
</li>
<li><p>进程是竞争计算机资源的基本单位</p>
<h3 id="进程状态及其转换"><a href="#进程状态及其转换" class="headerlink" title="#进程状态及其转换"></a>#进程状态及其转换</h3></li>
</ul>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/8c0a91e0-0a28-4da4-883f-e6c0d7a387da/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=6d7b33fb6eea3bebe9df594f7a8dd259cc41d0977f484e487ae8dc056670fb46&X-Amz-SignedHeaders=host" alt="双挂起模型"></p>
<p>双挂起模型</p>
</li>
<li><p>挂起进程的目的</p>
<ul>
<li>提高处理机效率：就绪进程表为空时，OS将阻塞进程从内存中“挂起”到磁盘的“挂起队列”，再从该队列选另一进程进入内存，或接受一个新进程的请求。</li>
<li>为运行进程提供足够内存：资源紧张时，暂停某些进程，如：CPU繁忙（或实时任务执行），内存紧张</li>
<li>用于调试：在调试时，挂起被调试进程（从而对其地址空间进行读写）</li>
</ul>
</li>
<li><p>挂起（Suspend）：把一个进程从内存转到外存；可能有以下几种情况</p>
<ul>
<li><p>阻塞到阻塞挂起：没有进程处于就绪状态或就绪进程要求更多内存资源时，会进行这种转换，以纳入新进程或运行就绪进程；</p>
</li>
<li><p>就绪到就绪挂起：当有高优先级阻塞（系统认为会很快就绪的）进程和低优先级就绪进程时，系统会选择挂起低优先级就绪进程；</p>
</li>
<li><p>运行到就绪挂起：对抢先式分时系统，当有高优先级阻塞挂起进程因事件出现而进入就绪挂起时，系统<strong>可能</strong>会把运行进程转到就绪挂起状态</p>
</li>
</ul>
</li>
<li><p>激活（Activate）：把一个进程从外存转到内存；可能有以下几种情况</p>
<ul>
<li>就绪挂起到就绪：没有就绪进程或挂起就绪进程优先级高于就绪进程时，会进行这种转换</li>
<li>阻塞挂起到阻塞：当一个进程释放足够内存时，系统会把一个高优先级阻塞挂起（系统认为会很快出现所等待的事件）进程转为阻塞状态；较少出现。</li>
</ul>
</li>
</ul>
<h3 id="进程控制的功能"><a href="#进程控制的功能" class="headerlink" title="#进程控制的功能"></a>#进程控制的功能</h3><ul>
<li>原语：由若干条指令构成的“原子操作(atomic operation)”过程<ul>
<li>进程创建</li>
<li>进程撤销</li>
<li>进程阻塞<ul>
<li>进程自身的主动行为</li>
</ul>
</li>
<li>进程唤醒<ul>
<li>由系统进程唤醒</li>
<li>由事件发生进程唤醒</li>
</ul>
</li>
<li>进程挂起</li>
<li>进程激活</li>
</ul>
</li>
</ul>
<h2 id="Chapter-3-5：进程同步"><a href="#Chapter-3-5：进程同步" class="headerlink" title="#Chapter 3-5：进程同步"></a>#Chapter 3-5：进程同步</h2><h3 id="进程同步与互斥"><a href="#进程同步与互斥" class="headerlink" title="#进程同步与互斥"></a>#进程同步与互斥</h3><ul>
<li>进程互斥<ul>
<li>资源共享关系（间接互相制约关系）</li>
<li>进程本身之间不存在直接联系</li>
</ul>
</li>
<li>进程同步<ul>
<li>相互合作关系（直接互相制约关系）</li>
<li>进程本身之间存在着相互制约的关系</li>
</ul>
</li>
</ul>
<h3 id="临界资源"><a href="#临界资源" class="headerlink" title="#临界资源"></a>#临界资源</h3><p>一段时间内只允许一个进程访问的资源，诸进程应采取互斥方式实现资源共享、</p>
<h3 id="临界区"><a href="#临界区" class="headerlink" title="#临界区"></a>#临界区</h3><h4 id="定义"><a href="#定义" class="headerlink" title="#定义"></a>#定义</h4><ul>
<li>临界区：每个进程中访问临界资源的代码</li>
<li>进入区：临界区前的一段用于进行临界资源检查的代码</li>
<li>退出区：将临界区正被访问的标志恢复为未被访问的标志</li>
</ul>
<h4 id="使用临界区遵循的原则"><a href="#使用临界区遵循的原则" class="headerlink" title="#使用临界区遵循的原则"></a>#使用临界区遵循的原则</h4><ul>
<li>空闲则入</li>
<li>忙则等待</li>
<li>有限等待</li>
<li>让权等待</li>
</ul>
<h4 id="进程同步机制"><a href="#进程同步机制" class="headerlink" title="#进程同步机制"></a>#进程同步机制</h4><p>解决诸进程互斥进入临界区的方法</p>
<ul>
<li>硬件同步机制</li>
<li>软件同步机制</li>
</ul>
<h3 id="硬件同步机制"><a href="#硬件同步机制" class="headerlink" title="#硬件同步机制"></a>#硬件同步机制</h3><h4 id="关中断"><a href="#关中断" class="headerlink" title="#关中断"></a>#关中断</h4><p>最简单的方法之一，缺点</p>
<ul>
<li>滥用关中断权力导致严重后果</li>
<li>影响新系统效率，限制cpu交叉执行程序</li>
<li>不适用于多cpu系统</li>
</ul>
<h4 id="Test-and-Set"><a href="#Test-and-Set" class="headerlink" title="#Test and Set"></a>#Test and Set</h4><p>借助硬件指令TS</p>
<h4 id="利用swap指令"><a href="#利用swap指令" class="headerlink" title="#利用swap指令"></a>#利用swap指令</h4><p>如80x96的xchg</p>
<h3 id="进程互斥的软件方法"><a href="#进程互斥的软件方法" class="headerlink" title="#进程互斥的软件方法"></a>#进程互斥的软件方法</h3><h4 id="一堆不完善的算法"><a href="#一堆不完善的算法" class="headerlink" title="#一堆不完善的算法"></a>#一堆不完善的算法</h4><ul>
<li>算法1 单标志<ul>
<li><strong>强制轮流</strong>进入临界区</li>
</ul>
</li>
<li>算法2 双标志先检查<ul>
<li>检查和修改不是原子操作</li>
<li>可能同时进临界区</li>
</ul>
</li>
<li>算法3 双标志后检查<ul>
<li>可能都进不了临界区</li>
</ul>
</li>
</ul>
<h4 id="利用信号量机制"><a href="#利用信号量机制" class="headerlink" title="#利用信号量机制"></a>#<strong>利用信号量机制</strong></h4><ol>
<li><p>整型信号量</p>
<ul>
<li>仅能通过 wait(S) 和 signal(S) 访问</li>
<li>wait 时不放弃处理机</li>
</ul>
</li>
<li><p>记录型信号量</p>
<ul>
<li>wait 时小于0则自我阻塞</li>
<li>signal 时小于等于0则从阻塞队列取出一个进程放入就绪队列</li>
</ul>
</li>
<li><p>AND型信号量</p>
<ul>
<li>Swait 多个资源信号量同时满足才执行，否则阻塞</li>
<li>Ssignal 对占用的每个资源信号量都释放，然后检查每种资源的等待队列，取出的进程也要多个资源信号量同时满足</li>
</ul>
</li>
</ol>
<h4 id="经典进程同步问题"><a href="#经典进程同步问题" class="headerlink" title="#经典进程同步问题"></a>#经典进程同步问题</h4><p>判断同步或互斥</p>
<ul>
<li>同步：两个进程合作时，一个进程的执行必须依赖另一个进程</li>
<li>互斥：两个进程不能同时使用同一个资源</li>
</ul>
<ol>
<li><p>生产者消费者</p>
<p>NoneBashCSSCC#GoHTMLJavaJavaScriptJSONPerlPHPPowershellPythonRubySQLTypeScriptYAML</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//Producer</span><br><span class="line">P(empty);</span><br><span class="line">P(mutex);</span><br><span class="line">one unit -&gt; buffer;</span><br><span class="line">V(mutex);</span><br><span class="line">V(full);</span><br><span class="line"></span><br><span class="line">//Consumer</span><br><span class="line">P(full);</span><br><span class="line">P(mutex);</span><br><span class="line">one unit &lt;- buffer;</span><br><span class="line">V(mutex);</span><br><span class="line">V(empty);</span><br></pre></td></tr></table></figure></li>
<li><p>读者写者</p>
<p>NoneBashCSSCC#GoHTMLJavaJavaScriptJSONPerlPHPPowershellPythonRubySQLTypeScriptYAML</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//Writer</span><br><span class="line">P(Wmutex);</span><br><span class="line">write;</span><br><span class="line">V(Wmutex);</span><br><span class="line"></span><br><span class="line">//Reader</span><br><span class="line">P(Rmutex);</span><br><span class="line">if (Rcount == 0)</span><br><span class="line">  P(Wmutex);</span><br><span class="line">++Rcount;</span><br><span class="line">V(Rmutex);</span><br><span class="line">read;</span><br><span class="line">P(Rmutex);</span><br><span class="line">--Rcount;</span><br><span class="line">if (Rcount == 0)</span><br><span class="line">  V(Wmutex);</span><br><span class="line">V(Rmutex);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="管程（Monitor）"><a href="#管程（Monitor）" class="headerlink" title="#管程（Monitor）"></a>#管程（Monitor）</h3><h4 id="基本思想"><a href="#基本思想" class="headerlink" title="#基本思想"></a>#基本思想</h4><p>把<strong>信号量</strong>及其<strong>操作原语</strong>封装在<strong>一个对象内部</strong></p>
<h4 id="定义-1"><a href="#定义-1" class="headerlink" title="#定义"></a>#定义</h4><p>管程是关于共享资源的数据结构及一组针对该资源的操作过程所构成的软件模块</p>
<h4 id="主要特性"><a href="#主要特性" class="headerlink" title="#主要特性"></a>#主要特性</h4><ul>
<li>模块化：一个管程是一个基本程序单位，可以单独编译</li>
<li>抽象数据类型：管程是一种特殊的数据类型，其中不仅有数据，而且有对数据进行操作的代码</li>
<li>信息封装：管程是半透明的，管程中的外部过程（函数）实现了某些功能，至于这些功能是怎样实现的，在其外部则是不可见的</li>
</ul>
<h4 id="实现要素"><a href="#实现要素" class="headerlink" title="#实现要素"></a>#实现要素</h4><ul>
<li>管程中的共享变量在管程外部是不可见的，只能通过调用外部过程间接访问</li>
<li>管程互斥进入</li>
<li>管程中设有进程等待队列及相应的等待及唤醒操作</li>
</ul>
<h4 id="管程中的多个进程进入"><a href="#管程中的多个进程进入" class="headerlink" title="#管程中的多个进程进入"></a>#管程中的多个进程进入</h4><ul>
<li><p>当一个进入管程的进程执行等待操作时，它应当释放管程的互斥权</p>
</li>
<li><p>当一个进入管程的进程执行唤醒操作时（如Ｐ唤醒Ｑ），管程中便存在两个同时处于活动状态的进程</p>
</li>
<li><p>唤醒切换方法（可采用下列两种之一，通常为第一种）</p>
<ul>
<li>P等待，Q继续，直到Q等待或退出</li>
<li>Q等待，P继续，直到P等待或退出</li>
<li>规定唤醒为管程中最后一个可执行的操作</li>
</ul>
</li>
<li><p>入口等待队列</p>
<p>试图进入一个已被占用的管程的进程在管程入口处等待的队列</p>
</li>
<li><p>紧急等待队列</p>
<p>管程内部由于执行唤醒操作，可能出现多个等待进程，进入紧急等待队列，优先级高于入口队列</p>
</li>
</ul>
<h4 id="条件变量"><a href="#条件变量" class="headerlink" title="#条件变量"></a>#条件变量</h4><p>表示一种等待原因，并不取具体数值。</p>
<p>形式为 <code>Var x, y:condition</code>，相应的操作为<code>X.wait</code>和<code>X.signal</code>。</p>
<p>X.signal操作的作用，是重新启动一个被阻塞的进程，但如果没有被阻塞的进程，则X.signal操作不产生任何后果。</p>
<h4 id="管程的格式"><a href="#管程的格式" class="headerlink" title="#管程的格式"></a>#管程的格式</h4><p>NoneBashCSSCC#GoHTMLJavaJavaScriptJSONPerlPHPPowershellPythonRubySQLTypeScriptYAML</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">TYPE monitor_name = MONITOR;</span><br><span class="line">共享变量说明</span><br><span class="line">define 本管程内所定义、本管程外可调用的过程（函数）名字表</span><br><span class="line">use    本管程外所定义、本管程内将调用的过程（函数）名字表</span><br><span class="line">PROCEDURE 过程名（形参表）；</span><br><span class="line">		过程局部变量说明；</span><br><span class="line">		BEGIN</span><br><span class="line">			语句序列；</span><br><span class="line">		END;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">FUNCTION 函数名（形参表）：值类型；</span><br><span class="line">	函数局部变量说明；</span><br><span class="line">		BEGIN</span><br><span class="line">			语句序列；</span><br><span class="line">		END;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line">	共享变量初始化语句序列；</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>



<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/9f26d548-53e8-489d-98a6-40f6d15ccf04/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=c981b5238c3391983864dbe5a7ae8b78c70041fa1aa24865f9cb7716c568fa74&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="管程的组成"><a href="#管程的组成" class="headerlink" title="#管程的组成"></a>#管程的组成</h4><ul>
<li>名称：一个管程对应一个共享资源</li>
<li>数据结构说明：局部控制变量</li>
<li>操作原语：访问管程的唯一途径，本身互斥</li>
<li>初始化代码</li>
</ul>
<h4 id="管程和进程的异同"><a href="#管程和进程的异同" class="headerlink" title="#管程和进程的异同"></a>#管程和进程的异同</h4><ul>
<li>设计目的不同</li>
<li>需要OS维护的数据结构不同<ul>
<li>PCB</li>
<li>等待队列</li>
</ul>
</li>
<li>管程被进程调用</li>
<li><strong>管程是操作系统的固有成分，无创建和撤销</strong></li>
</ul>
<h2 id="Chapter-6：进程通信及线程"><a href="#Chapter-6：进程通信及线程" class="headerlink" title="#Chapter 6：进程通信及线程"></a>#Chapter 6：进程通信及线程</h2><h3 id="进程通信"><a href="#进程通信" class="headerlink" title="#进程通信"></a>#进程通信</h3><p>一个进程直接或通过某一机构发一条消息给另一进程，且据此来控制其它进程，我们将进程之间的这种信息交流称为进程通信。</p>
<h3 id="进程通信类型"><a href="#进程通信类型" class="headerlink" title="#进程通信类型"></a>#进程通信类型</h3><h4 id="低级通信机制"><a href="#低级通信机制" class="headerlink" title="#低级通信机制"></a>#低级通信机制</h4><ul>
<li>传送字节数较少，起到控制进程的作用</li>
<li>例子：PV操作</li>
<li>优点：速度快</li>
<li>缺点：信息量小，效率低，编程复杂</li>
</ul>
<h4 id="高级通信机制"><a href="#高级通信机制" class="headerlink" title="#高级通信机制"></a>#高级通信机制</h4><p>传送任意数量数据，解决了一个进程将大批量数据传递给另一个进程的问题‘</p>
<ol>
<li><p>共享存储系统</p>
<ul>
<li>基于共享数结构</li>
<li>基于共享存储区</li>
<li>原理：在内存中开辟一个共享区域</li>
<li>特点：效率高, 一个进程可以分配多个共享存储区，最大值由系统决定</li>
</ul>
</li>
<li><p>消息传递系统</p>
<p>进程间通信以消息为单位进行</p>
<ol>
<li>直接通信</li>
<li>间接通信：利用中间体</li>
</ol>
<ul>
<li>原理<ul>
<li>消息通信机构管理一组空闲缓冲区消息</li>
<li>A进程向B进程发送消息，申请一个缓冲区，填写有关 信息后，发送信号给B进程</li>
<li>B进程读取数据并释放消息缓冲区</li>
</ul>
</li>
</ul>
</li>
<li><p>管道通信</p>
<ul>
<li>管道：pipe文件</li>
<li>管道通信：发送进程（写进程）以字符流形式将大量数据送入管道，接收进程（读进程）从管道接收数据。</li>
<li>特征<ul>
<li>FIFO</li>
<li>传送任意量数据</li>
<li>写满/读空则阻塞</li>
</ul>
</li>
<li>三方协调能力<ul>
<li>双方都存在</li>
<li>互斥</li>
<li>同步</li>
</ul>
</li>
</ul>
</li>
<li><p>客户端-服务器系统</p>
<ol>
<li>套接字</li>
<li>远程过程调用</li>
<li>远程方法调用</li>
</ol>
</li>
</ol>
<h3 id="消息传递通信的实现方式"><a href="#消息传递通信的实现方式" class="headerlink" title="#消息传递通信的实现方式"></a>#消息传递通信的实现方式</h3><h4 id="直接消息传递系统"><a href="#直接消息传递系统" class="headerlink" title="#直接消息传递系统"></a>#直接消息传递系统</h4><ol>
<li><p>对称寻址方式</p>
<p>Send(receiver, message)</p>
<p>Receive(sender, message)</p>
</li>
<li><p>非对称寻址方式</p>
<p>Send(p, message)</p>
<p>Receive(id, message)</p>
</li>
</ol>
<h4 id="间接通信方式——邮箱通信"><a href="#间接通信方式——邮箱通信" class="headerlink" title="#间接通信方式——邮箱通信"></a>#间接通信方式——邮箱通信</h4><ol>
<li><p>邮箱定义为一种数据结构</p>
<ul>
<li>邮箱头</li>
<li>邮箱体</li>
</ul>
</li>
<li><p>条件和特点</p>
<ul>
<li>为空才能发，不为空才能接收</li>
<li>系统提供邮箱创建、撤销，信息发送、接收的相关原语</li>
<li>收发进程无直接关系</li>
<li>收发进程间存在邮箱</li>
</ul>
</li>
<li><p>邮箱通信原语</p>
<p>Send(mailbox, message)</p>
<p>Receive(mailbox, message)</p>
</li>
<li><p>邮箱类型</p>
<ol>
<li>私有：用户进程创建，属于该进程一部分，其他进程可以发，该进程读</li>
<li>公用：操作系统创建</li>
</ol>
</li>
</ol>
<h3 id="线程"><a href="#线程" class="headerlink" title="#线程"></a>#线程</h3><h4 id="引入"><a href="#引入" class="headerlink" title="#引入"></a>#引入</h4><ul>
<li>线程：作为CPU调度单位，而引入线程后进程只作为其他资源分配单位<ul>
<li>只拥有必不可少的资源，如：线程状态、寄存器上下文、栈</li>
<li>同样具有三基本状态</li>
</ul>
</li>
<li>优点：减小并发执行的时间和空间开销（线程的创建、退出和调度），因此容许在系统中建立更多的线程来提高并发程度<ul>
<li>同进程内线程共享内存和文件资源</li>
</ul>
</li>
</ul>
<h4 id="线程的状态"><a href="#线程的状态" class="headerlink" title="#线程的状态"></a>#线程的状态</h4><p>执行，就绪，阻塞。</p>
<h4 id="TCB"><a href="#TCB" class="headerlink" title="#TCB"></a>#TCB</h4><p>记录了用于控制和管理线程的信息。</p>
<h4 id="属性"><a href="#属性" class="headerlink" title="#属性"></a>#属性</h4><ul>
<li>轻型实体。（线程是进程中的一个实体 ）</li>
<li>独立调度和分派的基本单位。在多线程OS中,线程是能独立运行的基本单位,因而也是独立调度和分派的基本单位。而把进程作为资源拥有的单位。由于线程很“轻’’,故线程的切换非常迅速且开销小</li>
<li>可并发执行</li>
<li>共享进程资源</li>
</ul>
<h4 id="线程等级"><a href="#线程等级" class="headerlink" title="#线程等级"></a>#线程等级</h4><ol>
<li><p>kernel-level thread</p>
<p><strong>依赖于OS kernel</strong></p>
<ul>
<li>内核维护进程和线程的上下文信息</li>
<li>线程切换由内核完成</li>
<li>一个线程发起系统调用而阻塞，不会影响其他线程的运行。</li>
<li><strong>时间片分配给线程</strong>，所以多线程的进程获得更多CPU时间。</li>
</ul>
</li>
<li><p>user-level thread</p>
<p><strong>不依赖于OS kernel</strong></p>
<ul>
<li>时间片分配给线程</li>
<li>用户线程的维护由应用进程完成</li>
<li>内核不了解用户线程的存在</li>
<li>用户线程切换不需要内核特权</li>
<li>用户线程调度算法可针对应用优化</li>
</ul>
</li>
</ol>
<h4 id="线程和进程的关系"><a href="#线程和进程的关系" class="headerlink" title="#线程和进程的关系"></a>#线程和进程的关系</h4><ul>
<li>线程是进程的一个组成部分。 每个进程在创建时通常只有一个线程，需要时这个线程可以创建其它线程。</li>
<li>进程的多线程都在进程的地址空间活动。某进程内的线程在其他进程不可见。</li>
<li>资源是分给进程的，而不是分给线程的，线程在执行中需要资源时，系统从进程的资源配额中扣除并分配给它。</li>
<li>处理机调度的基本单位是线程，线程之间竞争处理机，真正在处理机上运行的是线程。</li>
<li>线程在执行过程中， 需要同步。</li>
</ul>
<h2 id="Chapter-7-9-处理机调度与死锁"><a href="#Chapter-7-9-处理机调度与死锁" class="headerlink" title="#Chapter 7-9 处理机调度与死锁"></a>#Chapter 7-9 处理机调度与死锁</h2><h3 id="作业和处理机调度"><a href="#作业和处理机调度" class="headerlink" title="#作业和处理机调度"></a>#作业和处理机调度</h3><h4 id="作业的基本概念"><a href="#作业的基本概念" class="headerlink" title="#作业的基本概念"></a>#作业的基本概念</h4><ol>
<li><p>用户角度定义</p>
<ul>
<li>编程过程</li>
<li>在一次应用业务处理过程中，从输入开始到输出结束，用户要求计算机所作的有关该次业务处理的全部工作称为一个作业。</li>
<li>作业步：在一个作业的处理过程中，计算机所作的相对独立的工作。</li>
</ul>
</li>
<li><p>系统角度定义</p>
<p>作业 = 程序 + 数据（作业体）+ 作业说明书（作业控制语言）</p>
</li>
<li><p>作业组织</p>
<ul>
<li>作业 = 程序 + 数据 + 作业说明书</li>
<li>作业说明书<ul>
<li>体现用户的控制意图</li>
<li>组成<ul>
<li>作业基本情况</li>
<li>作业控制描述</li>
<li>作业资源要求描述</li>
</ul>
</li>
<li>由作业控制语言编写</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>作业控制语言</p>
<p>用户用于描述批处理作业处理过程控制意图的一种特殊程序</p>
</li>
</ol>
<ol>
<li>作业的建立<ul>
<li>建立过程：一个作业的全部程序和数据输入到外存且在系统中建立了相应的作业控制块（job control block——JCB）</li>
<li>包括作业的输入和控制块的建立</li>
<li>作业的输入：将作业的程序、数据和作业说明书从输入设备输入到外存，并形成有关初始信息</li>
<li>必须有外部启动信号通知系统调用相应的作业输入管理程序——决定了作业的输入方式</li>
</ul>
</li>
</ol>
<h4 id="处理机调度（高级，中级和低级调度）"><a href="#处理机调度（高级，中级和低级调度）" class="headerlink" title="#处理机调度（高级，中级和低级调度）"></a>#处理机调度（高级，中级和低级调度）</h4><p>一个批处理型作业，通常需要经过高级调度(作业调度)、低级调度(进程调度)、中级调度，方能获得处理机。</p>
<ol>
<li><p>高级调度（作业调度、长程调度）</p>
<ul>
<li><p>功能：用于决定把外存上处于后备队列中的哪些作业调入内存</p>
</li>
<li><p>具体操作</p>
<ul>
<li><p>创建进程</p>
</li>
<li><p>分配资源</p>
</li>
<li><p>排在就绪队列尾端</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>低级调度（进程调度、短程调度）</p>
<ul>
<li><p>功能</p>
<ul>
<li><p>保存现场</p>
</li>
<li><p>按某种算法选取进程</p>
</li>
<li><p>把处理机分配给所选进程（装入PCB恢复该进程断点）</p>
</li>
</ul>
</li>
<li><p>进程调度机制  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/22f511e0-4507-4b75-8a3e-ed7e5feac8ad/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=1a87968e0afff38b451ecf5e3018cc3781db707525bc36737f855174e6303836&X-Amz-SignedHeaders=host" alt="img"></p>
<ul>
<li><p>排队器</p>
</li>
<li><p>分派器</p>
</li>
<li><p>上下文切换器</p>
</li>
</ul>
</li>
<li><p>进程调度方式</p>
<ul>
<li>非抢占式<ul>
<li>正在执行的进程执行完毕， 选一新进程</li>
<li>执行中的进程因提出I/O请求而暂停执行</li>
<li>进程调用了P、V操作</li>
<li>分时系统中时间片用完</li>
</ul>
</li>
<li>抢占式<ul>
<li>优先权原则</li>
<li>短作业（进程）有限原则</li>
<li>时间片原则</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li>中级调度<ul>
<li>目的：提高内存利用率和系统吞吐量</li>
<li>功能<ul>
<li>挂起进程</li>
<li>激活被挂起的进程</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/a5dfdaef-1dfe-4d96-8316-f979ce9d7840/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=733bb8aa6df5b608870d85d2d285fcf723f02094afd143cf65e954531b2d7534&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="调度队列模型"><a href="#调度队列模型" class="headerlink" title="#调度队列模型"></a>#调度队列模型</h4><ol>
<li>仅有进程调度的调度队列模型</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/315ebb0d-13ac-4a8e-bd2c-e9035d54b232/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=383752300dc433fe66f39c52c7ab8648587f12c6ee0fc928e605695a519be5ec&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ol>
<li><p>具有高级和低级调度的调度队列模型</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/c3b68c18-4532-454c-a38b-f8502f9cc4bd/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=bbf10fe81fa553f17f15f626c9616e03d3a2d872117b8a4308472061b78766e1&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>同时具有三级调度的调度队列模型  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/ff4a1bee-9133-4704-a099-9edd06fe297e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=18a3cbbdae6d66fe30515b2cb115b558c0d549aa76ba8d12f3a488b83fee1994&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ol>
<h4 id="选择调度方式和算法的准则"><a href="#选择调度方式和算法的准则" class="headerlink" title="#选择调度方式和算法的准则"></a>#选择调度方式和算法的准则</h4><ul>
<li><p>面向用户</p>
<ol>
<li><p>周转时间短（评价批处理系统）</p>
<p>所谓周转时间，是指从作业提交给系统开始，到作业完成为止的这段时间间隔(称为作业周转时间)</p>
</li>
<li><p>响应时间快（评价分时系统）</p>
<p>响应时间是从用户通过键盘提交一个请求开始，直至系统首次产生响应为止的时间，或说直到在屏幕上显示出结果为止的一段时间间隔</p>
</li>
<li><p>截止时间的保证（评价实时系统）</p>
<p>所谓截止时间，是指某任务必须开始执行的最迟时间，或必须完成的最迟时间。</p>
</li>
<li><p>优先权准则</p>
</li>
</ol>
</li>
<li><p>面向系统</p>
<ol>
<li>系统吞吐量高</li>
<li>处理机利用率好</li>
<li>各类资源的平衡利用</li>
</ol>
</li>
</ul>
<h4 id="调度算法"><a href="#调度算法" class="headerlink" title="#调度算法"></a>#<strong>调度算法</strong></h4><ol>
<li><p>先来先服务算法（FCFS）</p>
<p>每次调度从就绪队列中选择最先进入的进程，一直执行到完成或发生阻塞为止</p>
</li>
<li><p>短进程优先算法（SJ(P)F）</p>
<p>从就绪队列中选出一估计运行时间最短的进程，将处理机分配给它，使它立即执行并一直执行到完成，或发生某事件而被阻塞放弃处理机时，再重新调度</p>
<p>缺点：不利于长作业</p>
</li>
<li><p>高优先权优先算法（FPF）</p>
<ul>
<li><p>非抢占式</p>
<p>系统一旦把处理机分配给就绪队列中优先权最高的进程后，该进程便一直执行下去，直至完成； 或因发生某事件使该进程放弃处理机时，系统方可再将处理机重新分配给另一优先权最高的进程</p>
</li>
<li><p>抢占式</p>
<p>在执行期间，只要出现了另一个优先权更高的进程，进程调度程序就立即停止当前进程(原优先权最高的进程)的执行，重新将处理机分配给新到的优先权最高的进程。</p>
</li>
<li><p>优先权的类型</p>
<ul>
<li>静态优先权：在创建进程时确定，在进程的整个运行期间保持不变<ul>
<li>进程类型</li>
<li>进程对资源的需求</li>
<li>用户要求</li>
</ul>
</li>
<li>动态优先权：在创建进程时所赋予的优先权，是可以随进程的推进或随其等待时间的增加而改变的，以便获得更好的调度性能</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>高响应比优先算法</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/703d60cc-b058-40db-9e36-ed7035c14ac2/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121648Z&X-Amz-Expires=60&X-Amz-Signature=436022d1762e726dbf4128d4464113ffd7ce7912504f5d687dada8a75529e26e&X-Amz-SignedHeaders=host" alt="img"></p>
<p>优先权又相当于响应比RP。</p>
<ul>
<li>等待时间相同，则要求服务的时间愈短，其优先权愈高</li>
<li>当要求服务的时间相同时，等待时间愈长，其优先权愈高</li>
<li>对于长作业，优先级随等待时间增加而提高</li>
</ul>
</li>
</ol>
<ol>
<li><p>基于时间片的轮转算法（RR）</p>
<p>就绪进程按先来先服务的原则，把CPU分配给队首进程，并令其执行一个时间片。当执行的时间片用完时，将它送往就绪队列的末尾；依次执行下个进程</p>
<p>假设某时间片执行完毕时刻，有新进程到来，则先将新进程插入就绪队列尾部，然后才将刚刚时间片结束未执行完毕的进程插入就绪队列的尾部</p>
<p>优点：保证就绪队列中的所有进程，在一给定的时间内，均能获得一时间片的处理机执行时间</p>
</li>
</ol>
<ol>
<li><strong>多级反馈队列调度算法</strong><ul>
<li>原则<ol>
<li>设置多个就绪队列</li>
<li>各个队列优先级不同</li>
<li>各个队列进程执行时间片大小不同，优先级越高，时间片越小</li>
</ol>
</li>
<li>实施过程<ul>
<li><strong>新进程</strong>放入第1队列（优先级最高）的末尾，按FCFS调度</li>
<li>在规定时间片内能完成，便正常结束；否则<strong>降级</strong>到下一队列</li>
<li>降到第n队列（优先级最低）后，在其中<strong>按RR调度</strong><ul>
<li>仅当更高优先级队列均为空闲，才调度第i队列中进程运行</li>
</ul>
</li>
<li>高优先级进程采用<strong>抢占原则</strong>，被抢占者放回本队列末尾</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/77d0e958-ea90-485a-a08d-dd267d41e03d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=6930d2fad8e5a874376f0a7005d0d73d682861babf802845bff9b6bb626ebb83&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h3 id="实时调度"><a href="#实时调度" class="headerlink" title="#实时调度"></a>#实时调度</h3><h4 id="特点（基本条件）"><a href="#特点（基本条件）" class="headerlink" title="#特点（基本条件）"></a>#特点（基本条件）</h4><ul>
<li>更详细的调度信息</li>
<li>抢先式调度</li>
<li>快速中断响应</li>
<li>快速上下文切换</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="#分类"></a>#分类</h4><ul>
<li>非抢占式<ul>
<li>非抢占式轮转</li>
<li>非抢占式优先</li>
</ul>
</li>
<li>抢占式<ul>
<li>基于时钟中断的抢占式</li>
<li>立即抢占</li>
</ul>
</li>
</ul>
<h4 id="常用的几种实时调度算法"><a href="#常用的几种实时调度算法" class="headerlink" title="#常用的几种实时调度算法"></a>#常用的几种实时调度算法</h4><p>都是基于任务的优先权，并根据确定优先级方法的不同而形成以下几种算法。</p>
<ol>
<li><p>最早截止时间优先(EDF Earliest Deadline First)算法  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/7f0df266-bcc4-45b3-8cde-f290630e8716/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=865f122269f71cd9eb06d83602eb65d8d3480d128c0e343d6b5925924670ceb3&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>最低松弛度优先(LLF)算法</p>
<p><strong>松弛度 = 完成截止时间 - 服务时间</strong></p>
<p>松弛度越小表示该任务越紧迫，优先级别越高。</p>
<p>算法要求实现一个按松弛度排序的实时任务就绪队列，松弛度最低的任务排在队列最前面，调度程序总是选择就绪队列中的队首任务执行</p>
</li>
</ol>
<h3 id="多处理机调度"><a href="#多处理机调度" class="headerlink" title="#多处理机调度"></a>#多处理机调度</h3><h4 id="与单处理机调度的区别"><a href="#与单处理机调度的区别" class="headerlink" title="#与单处理机调度的区别"></a>#与单处理机调度的区别</h4><ul>
<li>注重整体运行效率</li>
<li>更多样的调度算法</li>
<li>多处理机访问OS数据解雇时的互斥</li>
<li>调度单位广泛采用线程</li>
</ul>
<h4 id="对称式多处理系统"><a href="#对称式多处理系统" class="headerlink" title="#对称式多处理系统"></a>#对称式多处理系统</h4><p>不用看。</p>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="#死锁"></a>#死锁</h3><h4 id="概念"><a href="#概念" class="headerlink" title="#概念"></a>#概念</h4><p>指两个或两个以上的进程都无限止的等待永不出现的资源而发生的一种状态。</p>
<h4 id="产生原因"><a href="#产生原因" class="headerlink" title="#产生原因"></a>#产生原因</h4><ul>
<li>竞争资源<ul>
<li>可剥夺性资源</li>
<li>非剥夺性资源</li>
<li>临时性资源</li>
<li>永久性资源</li>
</ul>
</li>
<li>进程间推进顺序非法</li>
</ul>
<h4 id="必要条件"><a href="#必要条件" class="headerlink" title="#必要条件"></a>#必要条件</h4><ul>
<li>互斥使用</li>
<li>不可抢占</li>
<li>请求和保持</li>
<li>循环等待</li>
</ul>
<h4 id="死锁处理方法概述"><a href="#死锁处理方法概述" class="headerlink" title="#死锁处理方法概述"></a>#死锁处理方法概述</h4><ul>
<li><p>死锁预防</p>
</li>
<li><p>死锁避免</p>
</li>
<li><p>死锁检测+恢复</p>
</li>
<li><p>死锁忽略</p>
</li>
</ul>
<ol>
<li><p>死锁预防的方法例子</p>
<ul>
<li><p>在进程执行前，一次性申请所有需要的资源</p>
</li>
<li><p>对资源类型进行排序，资源申请必须按序进行</p>
</li>
</ul>
</li>
<li><p>死锁避免</p>
<ul>
<li><p>安全状态：如果系统中的所有进程存在一个可完成的执行序列，则称系统处于安全状态</p>
</li>
<li><p>银行家算法</p>
<p>检测当前状态是否安全的流程</p>
<p>NoneBashCSSCC#GoHTMLJavaJavaScriptJSONPerlPHPPowershellPythonRubySQLTypeScriptYAML</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">int Available[1..m]; //每种资源剩余数量</span><br><span class="line">int Allocation[1..n,1..m]; //已分配资源数量</span><br><span class="line">int Need[1..n,1..m];//进程还需的各种资源数量</span><br><span class="line">int Work[1..m]; //工作向量</span><br><span class="line">bool Finish [1..n]; //进程是否结束</span><br><span class="line"></span><br><span class="line">Work = Available; Finish[1..n] = false; </span><br><span class="line">while(true) &#123; </span><br><span class="line">   for(i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">     if(Finish[i] == false &amp;&amp; Need[i] &lt;= Work) &#123;</span><br><span class="line">        Work = Work + Allocation[i];</span><br><span class="line">        Finish[i] = true; break;</span><br><span class="line">     &#125;</span><br><span class="line">     else goto end;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">end:</span><br><span class="line">for(i=1;i&lt;=n;i++) </span><br><span class="line">   if(Finish[i]==false) return “deadlock”;</span><br></pre></td></tr></table></figure>



<p>完整算法流程：</p>
<ul>
<li><p>对某个客户提出的贷款请求，先假设批准其请求，进入系统状态T</p>
</li>
<li><p>用上面的算法检测状态T是否安全</p>
</li>
<li><p>如果安全，则批准该请求；否则不批准该请求</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>死锁的检测和恢复</p>
<ul>
<li>死锁检测<ul>
<li>发现问题再处理</li>
<li>定时检测或发现资源利用率低时检测</li>
</ul>
</li>
<li>死锁接触<ul>
<li>剥夺资源</li>
<li>撤销进程</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>死锁忽略：没讲</p>
<blockquote>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/edf7cabd-9eab-4025-903a-7a128ae68fd7/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=88643d772ec34828a8416a8d54fff73a141d4d4d965ee4e74b1c1879085609ae&X-Amz-SignedHeaders=host" alt="休息一会"></p>
<p>休息一会</p>
</blockquote>
</li>
</ol>
<h2 id="Chapter-10-13-存储器管理"><a href="#Chapter-10-13-存储器管理" class="headerlink" title="#Chapter 10-13 存储器管理"></a>#Chapter 10-13 存储器管理</h2><h3 id="存储器的层次结构"><a href="#存储器的层次结构" class="headerlink" title="#存储器的层次结构"></a>#存储器的层次结构</h3><h4 id="存储组织"><a href="#存储组织" class="headerlink" title="#存储组织"></a>#存储组织</h4><p>最佳状态：各层次的存储器都处于均衡的繁忙状态</p>
<h4 id="存储管理的功能"><a href="#存储管理的功能" class="headerlink" title="#存储管理的功能"></a>#存储管理的功能</h4><ul>
<li>主存分配和回收</li>
<li>地址变换</li>
<li>存储共享和保护</li>
<li>主存地址扩充</li>
</ul>
<h3 id="程序的装入和链接"><a href="#程序的装入和链接" class="headerlink" title="#程序的装入和链接"></a>#程序的装入和链接</h3><h4 id="程序的装入（重定位方法）"><a href="#程序的装入（重定位方法）" class="headerlink" title="#程序的装入（重定位方法）"></a>#程序的装入（重定位方法）</h4><p>重定位：将程序中的虚拟地址转换为主存中的物理地址的转化过程</p>
<ul>
<li><p>可重定位装入（静态重定位）</p>
<p>程序运行前，由链接装入程序进行的一次重定位，完成地址转换，装入后不能移动、改变空间或被换出主存。</p>
<ul>
<li>优点：不许硬件变换机构支持</li>
<li>缺点：需要占用连续空间，运行期间不能移动，不能共享</li>
</ul>
</li>
<li><p>动态运行时装入（动态重定位）</p>
<p><strong>在程序装入时保持逻辑地址不变，装入内存后仍是相对地址</strong>。</p>
<p>在程序执行的过程中，每当访问指令或数据时，才将要访问的指令或数据的逻辑地址转换成物理地址。</p>
</li>
</ul>
<h3 id="分区存储管理"><a href="#分区存储管理" class="headerlink" title="#分区存储管理"></a>#分区存储管理</h3><h4 id="分配方式"><a href="#分配方式" class="headerlink" title="#分配方式"></a>#分配方式</h4><ol>
<li><p>固定分区</p>
<p>把内存划分为若干个固定大小的连续分区。</p>
<ol>
<li><p>划分分区的方法</p>
<ul>
<li>分区大小相等</li>
<li>分区大小不等</li>
</ul>
</li>
<li><p>内存分配</p>
<p>使用分区说明表</p>
</li>
<li><p>固定分区的进程队列</p>
<p>多队列适用于大小不等的固定分区；单队列适用于大小相同的固定分区，也可用于大小不等</p>
</li>
</ol>
</li>
<li><p>动态分区</p>
<p>在装入程序时按其初始要求分配，或在其执行过程中通过系统调用进行分配或改变分区大小。</p>
<ul>
<li>优点：没有内碎片</li>
<li>缺点：有外碎片，如果大小不是任意的，也可能出现内碎片</li>
<li>将空闲分区合并，需要移动多个段(复制内容)：内存紧缩</li>
</ul>
</li>
</ol>
<h4 id="分区分配中的数据结构"><a href="#分区分配中的数据结构" class="headerlink" title="#分区分配中的数据结构"></a>#分区分配中的数据结构</h4><ol>
<li>空闲分区表</li>
<li>空闲分区链</li>
</ol>
<h4 id="分区分配算法"><a href="#分区分配算法" class="headerlink" title="#分区分配算法"></a>#分区分配算法</h4><ol>
<li>首次适应算法（first fit）<ul>
<li>空闲分区链以地址递增的次序链接，从链首开始顺序查找，直到找到能满足要求的空闲分区</li>
<li>优先分配低地址部分</li>
</ul>
</li>
<li>循环首次适应算法<ul>
<li>每次分配从上次找到的空闲分区的下一个空闲分区开始查找，直到找到</li>
<li>采用循环查找方式</li>
</ul>
</li>
<li>最佳适应算法<ul>
<li>将所有空闲分区按大小递增排序形成链表</li>
<li>从链首开始查找，第一个找到的必然最优</li>
<li>容易产生碎片</li>
</ul>
</li>
</ol>
<h4 id="分区分配操作"><a href="#分区分配操作" class="headerlink" title="#分区分配操作"></a>#分区分配操作</h4><ol>
<li><p>malloc</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/21c48c13-0246-433c-9869-98003545987a/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=36190f50c9bb87069264e0a11c9f1e6ae5d5a5fb859c0c3520443beba412489d&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>free</p>
<ul>
<li>与相邻的空闲分区合并</li>
</ul>
</li>
</ol>
<h4 id="可重定位分区分配"><a href="#可重定位分区分配" class="headerlink" title="#可重定位分区分配"></a>#可重定位分区分配</h4><ol>
<li><p>内存紧缩</p>
<p>将各个占用分区向内存一端移动。使各个空闲分区聚集在另一端，然后将各个空闲分区合并成为一个空闲分区</p>
<ul>
<li><p>需要动态重定位</p>
</li>
<li><p>紧缩时机：每个分区释放后，或内存分配找不到满足条件的空闲分区时</p>
</li>
</ul>
</li>
<li><p>动态重定位的实现</p>
<ul>
<li>当紧缩时，不需修改程序，只要修改原本的基址</li>
<li>增加重定位寄存器存放基址</li>
</ul>
</li>
</ol>
<ol>
<li><p>动态重定位分区算法</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/305f68e2-5fba-404c-b672-bd74436ccf2e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=62dbbee2cdb59711ffd0ea456abcf88ce29927fc9ebf4d9a47a75fe5425259d2&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ol>
<h4 id="对换"><a href="#对换" class="headerlink" title="#对换"></a>#对换</h4><ol>
<li><p>定义</p>
<p>把内存中暂时不能运行的进程或者暂时不用的程序和数据，调出到外存上，以便腾出足够的内存空间，再把已具备运行条件的进程或进程所需要的程序和数据，调入内存。</p>
<p>对换是提高内存利用率的有效措施。</p>
<ul>
<li>整体对换：以进程为单位</li>
<li>部分对换：以页或段为单位</li>
</ul>
</li>
<li><p>对换空间的管理</p>
<p>数据结构：可以用空闲分区表或空闲分区链</p>
<ul>
<li>外存空间分类<ul>
<li>文件区：离散分配</li>
<li>对换区：连续分配</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol>
<li><p>进程的换出和换入</p>
<ol>
<li><p>换出</p>
<p>系统首先选择处于阻塞状态且优先级最低的进程作为换出进程，然后启动盘块，将该进程的程序和数据传送到磁盘的对换区上。若传送过程未出现错误，便可回收该进程所占用的内存空间，并对该进程的进程控制块做相应的修改。</p>
</li>
<li><p>换入</p>
<p>系统应定时地查看所有进程的状态，从中找出“就绪”状态但已换出的进程，将其中换出时间(换出到磁盘上)最久的进程作为换入进程，将之换入，直至已无可换入的进程或无可换出的进程为止。</p>
</li>
</ol>
</li>
</ol>
<h3 id="基本分页存储管理方式"><a href="#基本分页存储管理方式" class="headerlink" title="#基本分页存储管理方式"></a>#基本分页存储管理方式</h3><h4 id="页面和页表"><a href="#页面和页表" class="headerlink" title="#页面和页表"></a>#页面和页表</h4><ol>
<li><p>页面</p>
<p>一个进程的逻辑地址空间分成若干大小相等的片，称为页面或页</p>
<p>相应地，也把内存空间分成与页面相同大小的若干存储块，称为（物理）块或页框</p>
<p>分配时，物理块可以不连续，而页内逻辑地址是连续的。</p>
<p>分页存储器的逻辑地址由两部分组成：页号和页内地址。</p>
<p>最后一页页内装不满形成的碎片叫做页内碎片</p>
</li>
<li><p>地址结构</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/cf392cde-57d4-4a79-b52d-64b1445522aa/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=bf0bc8237dc1df310e3dd2250466c2c0dc81f4bd384107a8d9792cbc0ca85bfa&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0b9046d4-f527-4589-91b9-f09e2e4217cb/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=ad4296346b28555e7fd0d6dd9abc67a8f8f6b43f67096facaa69ed0d2602f942&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>页表</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/d1c702d9-0422-4c90-bd05-cbbac80915e0/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=c3319c81d45dd6368fa60372522af766c4062e544d7e0005b024398778f44ad5&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<p>实现页号到物理块号的映射。</p>
<h4 id="地址变换机构——页表"><a href="#地址变换机构——页表" class="headerlink" title="#地址变换机构——页表"></a>#地址变换机构——页表</h4><p>地址变换机构的任务是实现逻辑地址到物理地址的转换，这一任务是借助页表完成的。</p>
<h4 id="简单页式"><a href="#简单页式" class="headerlink" title="#简单页式  "></a>#简单页式  <img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/a22446fe-b932-4843-99a6-8c8f12cc389a/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=387db8e8741cc8b93d62c9dc12584f2754c2d3e7347e7e4f459d36bd85733650&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></h4><p>地址转换的公式为：绝对地址＝块号X块长+页内地址</p>
<ul>
<li><p>引入TLB</p>
<p>一组相联快速存储，是<strong>寄存器</strong>，作为页表的<strong>缓存</strong>。</p>
<p><strong>利用局部性原理</strong>  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/299f784a-94f1-4fe5-aad6-3152fbfe38a3/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=fee9bc02a630ee8d0d6f2c37793fc1194592d6c73d7b46491a2252d858b937b4&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ul>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/d182ae7b-5391-48ef-a1bb-bbb896535690/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=cc590c59a4ddcb57bc8f95ddfaf0aee8fd8047aadfc416336c66b31d20132f30&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="两级和多级页表"><a href="#两级和多级页表" class="headerlink" title="#两级和多级页表"></a>#两级和多级页表</h4><ol>
<li><p>两级页表</p>
<p>将页表也进行分页，离散地放在不同的物理块中，为离散分配的页表再建立一张页表，称为外层页表。</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/aad687b1-7ac7-4b41-bc90-a10f8a05f062/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=0029ff6a37b76cbf42996a53dd2249602e4ea16b0dded952b840edb221833205&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/b67b33a6-0228-4afc-868c-f053c0b06b4c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=e127fe94fa782000c99092acb24b10b4506bf639231350f9b203aa8224301985&X-Amz-SignedHeaders=host" alt="img"><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/c7d18b12-1233-4883-8337-5a2f22057452/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=558a07c334c5ebe001e657c8c30dcf6d07813ab0f56ce1ebd5415c2ecca5da78&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></p>
<ol>
<li>多级页表</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/88af5422-5cea-4b32-8270-e2fde16755e4/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=03e4731155823d9d8a945e6bd7a24a2ee662f909baf868213a2e12b9394a28ec&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h3 id="基本分段存储管理方式"><a href="#基本分段存储管理方式" class="headerlink" title="#基本分段存储管理方式"></a>#基本分段存储管理方式</h3><h4 id="分段存储管理方式的引入"><a href="#分段存储管理方式的引入" class="headerlink" title="#分段存储管理方式的引入"></a>#分段存储管理方式的引入</h4><ul>
<li>方便编程</li>
<li>信息共享：段是信息的逻辑单位</li>
<li>信息保护</li>
<li>动态增长</li>
<li>动态链接</li>
</ul>
<h4 id="分段系统的基本原理"><a href="#分段系统的基本原理" class="headerlink" title="#分段系统的基本原理"></a>#分段系统的基本原理</h4><ol>
<li>分段<ul>
<li>基本原理：将程序的地址空间划分为若干段，程序加载时，分配其所需的所有段，这些段<strong>不必连续</strong>；物理内存的管理采用<strong>动态分区</strong>。需要CPU的<strong>硬件支持</strong>。</li>
<li>不同段可以分别编写和编译，可以采取不同保护，可以按段共享</li>
<li>优点：没有内碎片；便于改变进程占用空间大小</li>
<li>每个段都从0开始编址，并采用一段连续存储空间</li>
<li>段的长度并不相等</li>
<li>整个进程的地址空间是二维的</li>
</ul>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/5acc8095-d978-456d-ba93-77ae69aa3551/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=8d39179c17ee32017c46fbf6b23907df5d9fe9d34f230711c5c1d1c9b038de85&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ol>
<li>段表</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/190de758-970c-431a-b12b-b76db90c1425/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=da167e00033bebbf632c64d9be1b6ccd53556d927577b1da3e5c01d9af7beddc&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<p>段表实现从逻辑段到物理内存区的映射。</p>
<ul>
<li>简单段式管理的数据结构<ul>
<li>进程段表</li>
<li>系统段表</li>
<li>空闲段表</li>
</ul>
</li>
</ul>
<ol>
<li>地址变换机构</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/7796073e-b42f-413d-bc1f-da68fbd25705/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=173e9e0bc262dceae985ed15f7e1d4120b4bc3f25794bb19e36628091b403542&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="简单段式"><a href="#简单段式" class="headerlink" title="#简单段式"></a>#简单段式</h4><ol>
<li><p>地址变换举例  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/542d23b9-8c02-4174-8ae3-4807a07fd8e3/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=f4a88550013fc8efc4278e0a63829c9fbecab06c89941a80e0ed6e03e9d1cd82&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>分页和分段的主要异同</p>
<ul>
<li>相同<ul>
<li>都采用离散分配方式</li>
<li>都通过地址映射机构实现地址变换</li>
</ul>
</li>
<li>不同<ul>
<li>分页是出于系统管理的需要，分段是出于用户应用的需要<ul>
<li>一条指令或操作数可能会跨越两页，但不会跨越两段</li>
</ul>
</li>
<li>页的大小是系统固定的，段的大小通常不固定</li>
<li>逻辑地址表示<ul>
<li>分页是一维的，所有页组成一个地址空间</li>
<li>分段是二维的，每个段组成一个地址空间</li>
</ul>
</li>
<li>通常段比页大，因而段表比页表短，可以提高查找速度</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="信息共享"><a href="#信息共享" class="headerlink" title="#信息共享  "></a>#信息共享  <img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/920ce905-5164-432c-b1b8-d36a4af8ca17/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=0e3b2f055bf442cbdfd28ca6b018941b822d3093358fcf340329cb46cad5ad85&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></h4><h4 id="段页式存储管理"><a href="#段页式存储管理" class="headerlink" title="#段页式存储管理"></a>#段页式存储管理</h4><p>分页系统能有效地提高内存利用率，分段系统能很好地满足用户需要。结合二者优点，称为段页式系统。</p>
<ol>
<li><p>基本原理</p>
<p>先把用户程序分成若干段，再把每个段分成若干页</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/6c01a7f8-bf22-45dc-a464-5007c92cc61b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=1e237ae96ce66da7e485490508ad603e7638cb6c20b4433fd59ce5b2794f79c8&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/55307e6c-60f0-4913-b694-bfe662f8095e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=34a73ff8f85a4ebf90e3698b627736312a8853ad8a9c8de194e20c22131fcfa2&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></p>
<ol>
<li><p>地址变化过程  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/aa931ff7-a936-4ba1-8986-055de4a541c0/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=cab0eaed13134a39da2295c8e790ae8441bcd67ca8dbd949e09f72360abb6efc&X-Amz-SignedHeaders=host" alt="img"></p>
<ul>
<li>三次访存<ul>
<li>访问段表</li>
<li>访问页表</li>
<li>从地址中取数据</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>前面所介绍的各种存储器管理方式，它们都要求将一个作业全部装入内存方能运行。</li>
</ul>
<h3 id="虚拟存储器基本概念"><a href="#虚拟存储器基本概念" class="headerlink" title="#虚拟存储器基本概念"></a>#虚拟存储器基本概念</h3><h4 id="定义-2"><a href="#定义-2" class="headerlink" title="#定义"></a>#定义</h4><p>所谓虚拟存储器， 是指具有请求调入功能和置换功能， 能从逻辑上对内存容量加以扩充的一种存储器系统。</p>
<p>其逻辑容量受限于计算机的地址结构和可用磁盘容量，其运行速度接近于内存速度。</p>
<h4 id="实现方法"><a href="#实现方法" class="headerlink" title="#实现方法"></a>#实现方法</h4><ol>
<li><p>分页请求系统</p>
<p>在分页系统的基础上，增加了请求调页功能、页面置换功能所形成的页式虚拟存储系统</p>
<ul>
<li>硬件支持<ul>
<li>请求分页的页表机制</li>
<li>缺页中断机构</li>
<li>地址变换机构</li>
</ul>
</li>
<li>实现请求分页的软件</li>
</ul>
</li>
<li><p>分段请求系统</p>
<p>它是在分段系统的基础上，增加了请求调段功能、分段置换功能所形成的段式虚拟存储系统</p>
<ul>
<li>硬件支持<ul>
<li>请求分段的段表机制</li>
<li>缺段中断机构</li>
<li>地址转换机构</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="虚拟存储器的特征"><a href="#虚拟存储器的特征" class="headerlink" title="#虚拟存储器的特征"></a>#<strong>虚拟存储器的特征</strong></h4><ol>
<li><p>多次性（最重要的特征）</p>
<p>一个作业被分成多次地调入内存运行，亦即在作业运行时没有必要将其全部装入，只须将当前要运行的那部分程序和数据装入内存即可，以后运行到那一部分时再将它调入。</p>
</li>
<li><p>对换性</p>
<p>允许在作业的运行过程中换入、换出。</p>
</li>
<li><p><strong>虚拟性（表现出来的最重要的特征）（ppt上就这么写的</strong>😅<strong>）</strong></p>
<p>能够从逻辑上扩充内存容量</p>
</li>
</ol>
<h3 id="请求分页存储管理方式"><a href="#请求分页存储管理方式" class="headerlink" title="#请求分页存储管理方式"></a>#请求分页存储管理方式</h3><p>换进换出的基本单位是固定长的页面。</p>
<h4 id="硬件支持"><a href="#硬件支持" class="headerlink" title="#硬件支持"></a>#硬件支持</h4><ol>
<li><p>页表机制</p>
<p>要在基础分页管理方式的页表上增加若干位  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/76661ba6-0306-4010-a008-d308f7b1bfd2/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=43790e8e9d231a1cff38f97cf721ec7ecb7dc0378a988a24de0556bc3de07914&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>缺页中断</p>
<p>缺页中断在<strong>指令执行期间产生和进行处理</strong>，所缺页面被调入后，<strong>重新执行被中断的指令</strong>。</p>
<p>一条指令的执行可能产生多次缺页中断。</p>
</li>
<li><p>地址变换机构</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/42e967da-46e5-4a45-a37c-40607fffc915/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=a24049defd785ed29e02b3f288aa60599797780ec2797318e980aae191b2b402&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="虚拟存储的调入策略、分配策略和清除策略"><a href="#虚拟存储的调入策略、分配策略和清除策略" class="headerlink" title="#虚拟存储的调入策略、分配策略和清除策略"></a>#虚拟存储的调入策略、分配策略和清除策略</h4><ol>
<li><p>调入策略（确定调页时机）</p>
<ul>
<li>请求调页</li>
<li>预调页</li>
</ul>
</li>
<li><p>分配策略</p>
<ul>
<li>如何对物理内存进行分配（最先适应、最佳适应等）</li>
<li>在虚拟段式、段页式管理中不用考虑</li>
</ul>
</li>
<li><p>清除策略</p>
<ul>
<li><p>请求清除</p>
<p>该页被置换时才调出</p>
</li>
<li><p>预清除</p>
<p>该页被置换前就调出，因而可以成批调出多个页面</p>
</li>
</ul>
</li>
</ol>
<h4 id="内存分配策略和分配算法"><a href="#内存分配策略和分配算法" class="headerlink" title="#内存分配策略和分配算法"></a>#内存分配策略和分配算法</h4><p>涉及三个问题</p>
<ol>
<li><p>最小物理块数的确定</p>
<p>指保证进程正常运行所需的最小物理块数。</p>
<p>与硬件结构有关，取决于指令的格式、功能和寻址方式。</p>
</li>
<li><p>物理块的分配策略</p>
<ol>
<li><p><strong>固定分配局部置换</strong></p>
<p>为每个进程分配一固定页数的内存空间，在整个运行期间都不再改变。（固定分配）</p>
<p>运行时缺页，则从分配给该进程的n个页面中选出一页换出，然后再调入一页，保证该进程的内存空间不变。（局部置换）</p>
</li>
<li><p>可变分配全局置换</p>
</li>
<li><p>可变分配局部置换</p>
</li>
</ol>
</li>
<li><p>物理块的分配算法</p>
</li>
</ol>
<h4 id="调页策略"><a href="#调页策略" class="headerlink" title="#调页策略"></a>#调页策略</h4><ol>
<li><p>何时调入页面</p>
<ul>
<li>预调页</li>
<li>请求调页</li>
</ul>
</li>
<li><p>从何处调入页面</p>
<p>请求分页系统的外存分为文件区和对换区。对换区采用连续存储，速度更快</p>
<p>有三种情况</p>
<ol>
<li><p>系统拥有足够的对换区空间</p>
<p>可以全部从对换区调入页面，前提是在进程运行前将所需文件从文件区拷贝到对换区。</p>
</li>
<li><p>系统缺少足够的对换区空间</p>
<p>凡是不会被修改的文件，都直接从文件区调入，因而被置换时也不必换出。</p>
<p>可能被修改的文件，在被换出时放入对换区。</p>
</li>
<li><p>UNIX方式</p>
</li>
</ol>
</li>
<li><p>页面调入过程</p>
<p>每当程序所要访问的页面未在内存时，便向CPU发出一缺页中断，中断处理程序首先保留CPU环境，分析中断原因后， 转入缺页中断处理程序。该程序通过查找页表，得到该页在外存的物理块后， 如果此时内存能容纳新页，则启动磁盘I/O将所缺之页调入内存，然后修改页表。</p>
<p>如果内存已满，则须先按照某种置换算法从内存中选出一页准备换出；如果该页未被修改过，可不必将该页写回磁盘；但如果此页已被修改， 则必须将它写回磁盘，然后再把所缺的页调入内存， 并修改页表中的相应表项，置其存在位为“1”，并将此页表项写入快表中。在缺页调入内存后，利用修改后的页表， 去形成所要访问数据的物理地址，再去访问内存数据。</p>
</li>
</ol>
<h3 id="页面置换算法"><a href="#页面置换算法" class="headerlink" title="#页面置换算法"></a>#<strong>页面置换算法</strong></h3><p>选择页面换出的算法</p>
<p>抖动：刚被换出的页很快又重新被调用</p>
<h4 id="最佳置换算法和先进先出置换算法"><a href="#最佳置换算法和先进先出置换算法" class="headerlink" title="#最佳置换算法和先进先出置换算法"></a>#最佳置换算法和先进先出置换算法</h4><ol>
<li><p>最佳置换算法（OPT）</p>
<p>理论算法，被淘汰的页面在将来最长时间内不再被访问。</p>
</li>
<li><p>先进先出置换算法（FIFO）</p>
<p>总是淘汰最先进入内存的页面。</p>
</li>
</ol>
<h4 id="最近最久未使用置换算法（LRU）"><a href="#最近最久未使用置换算法（LRU）" class="headerlink" title="#最近最久未使用置换算法（LRU）"></a>#最近最久未使用置换算法（LRU）</h4><p>选择最近最久未使用的页面淘汰</p>
<h4 id="Clock置换算法（LRU的近似）"><a href="#Clock置换算法（LRU的近似）" class="headerlink" title="#Clock置换算法（LRU的近似）"></a>#Clock置换算法（LRU的近似）</h4><p>LRU对硬件支持要求较高</p>
<ol>
<li><p>简单的Clock置换算法  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/c48f3c67-6c1d-44c1-961c-a0e564b2daf7/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=a74c4341e99f3f664cc2e49ba5d040e8ee4c1b98245a1b264b3163a8254c6b32&X-Amz-SignedHeaders=host" alt="img"></p>
<ul>
<li>为每页设置一位访问位，将所有页面链成<strong>循环链表</strong>。</li>
<li>当某页被访问时，访问位置1</li>
<li>在寻找一页淘汰时，按FIFO顺序遍历链表<ul>
<li>若为0，就淘汰该页，<strong>遍历指针停在下一位</strong></li>
<li>若为1，则将其置0</li>
</ul>
</li>
</ul>
</li>
<li><p>改进型Clock算法</p>
<p>设置访问位A和修改位M，组合成四种情况</p>
<ul>
<li>A = 0, M = 0：最佳淘汰页</li>
<li>A = 0, M = 1：最近未被访问但已被修改，不是很好</li>
<li>A = 1, M = 0：最近已被访问，未被修改，可能再次被访问</li>
<li>A = 1, M = 1：最近已被访问且被修改</li>
</ul>
<p>执行流程如下</p>
<ol>
<li>从指针所指示的当前位置开始， 扫描循环队列， 寻找A=0且M=0的第一类页面， 将所遇到的第一个页面作为所选中的淘汰页。 <strong>在第一次扫描期间不改变访问位A。</strong></li>
<li>如果第一步失败，即查找一周后未遇到第一类页面， 则开始第二轮扫描，寻找A=0且M=1的第二类页面，将所遇到的第一个这类页面作为淘汰页。<strong>在第二轮扫描期间，将所有扫描过的页面的访问位都置0。</strong></li>
<li>如果第二步也失败，亦即未找到第二类页面，则<strong>将指针返回到开始的位置，并将所有的访问位复0</strong>。 然后重复第一步，如果仍失败，必要时再重复第二步，此时就一定能找到被淘汰的页。</li>
</ol>
</li>
</ol>
<h4 id="轮转算法"><a href="#轮转算法" class="headerlink" title="#轮转算法"></a>#轮转算法</h4><p>上面简单clock算法的非链表版本，按地址先后检查各页</p>
<h4 id="最不常用算法（LFU）"><a href="#最不常用算法（LFU）" class="headerlink" title="#最不常用算法（LFU）"></a>#最不常用算法（LFU）</h4><ul>
<li>选择到当前为止被访问次数最少的页面</li>
<li>每页设置访问计数器，每当页面被访问，计数器+1</li>
<li>要淘汰页面时，<strong>淘汰计数器最小的页面，并将所有计数清零</strong></li>
</ul>
<ul>
<li>Belady现象：增加分配给作业的内存块数，反而增加了缺页次数，提高缺页率</li>
</ul>
<h3 id="请求分段存储管理方式"><a href="#请求分段存储管理方式" class="headerlink" title="#请求分段存储管理方式"></a>#请求分段存储管理方式</h3><p>在请求分段系统中，程序运行之前只需先调入若干个分段（不必调入所有的分段），便可启动运行。当所访问的段不在内存时，可请求OS将所缺的段调入内存。</p>
<h4 id="硬件支持-1"><a href="#硬件支持-1" class="headerlink" title="#硬件支持"></a>#硬件支持</h4><ol>
<li><p>段表机制</p>
<p>在简单分段的基础上增加若干项。</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0f4b6070-e774-4a67-9660-a5da3e880d82/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=13f4d9f4acd2d0138d354f2d1df06e00bf6ec3aa06a28d8e975b90c1833ae6f6&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ol>
<li><p>缺页中断机构</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0745fb33-c2e3-49c8-84ec-1b6383d90d5a/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=8c18ff42696edadf6b3b5e7cadff77934167c5e36ea04fbdc2142a8dd12e276f&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>地址变换机构  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0f723291-6af6-4086-a9d5-4fb76a7b6e5c/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=5877e98dcad3b457a5698211d65aa6381ef5d4400b8f6f8272edc94c655b839c&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ol>
<h4 id="分段的共享和保护"><a href="#分段的共享和保护" class="headerlink" title="#分段的共享和保护"></a>#分段的共享和保护</h4><ol>
<li><p>共享段表</p>
<p>在系统中配置一张共享段表，所有共享段都在其中有一表项</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/128483dc-b7fa-40fc-bbee-9e5e20c67ad6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=ada882e609266ee9cef72bc8c80adf7c78605b178c369d82be5a3f274a8cfc84&X-Amz-SignedHeaders=host" alt="img"></p>
<p>不同进程用可用不同段号共享同一段，并有各自的读写权限。</p>
<ol>
<li><p>共享段的分配和回收</p>
<ol>
<li><p>分配</p>
<p>共享段分配内存时，对第一个请求使用该共享段的进程，由系统为该共享段分配一物理区，再把共享段调入该区，同时将该区的始址填入请求进程的段表的相应项中，还须在共享段表中增加一表项，填写有关数据，把count置为1。</p>
<p>当又有其它进程需要调用该共享段时，由于该共享段已被调入内存，故此时无须再为该段分配内存，而只需在调用进程的段表中，增加一表项，填写该共享段的物理地址；在共享段的段表中，填上调用进程的进程名、存取控制等，再执行count = count + 1操作，以表明有两个进程共享该段</p>
</li>
<li><p>回收</p>
<p>当共享此段的某进程不再需要该段时，应将该段释放， 包括撤在该进程段表中共享段所对应的表项，以及执行count = count - 1操作。若结果为0，则须由系统回收该共享段的物理内存，以及取消在共享段表中该段所对应的表项， 表明此时已没有进程使用该段；否则(减1结果不为0)， 则只是取消调用者进程在共享段表中的有关记录</p>
</li>
</ol>
</li>
<li><p>分段保护</p>
<ol>
<li>越界检查</li>
<li>存取控制检查（rwx）</li>
<li>环保护机构（ring）<ul>
<li>低编号的环具有高优先权，OS核心处于0环内；某些重要的实用程序和操作系统服务，占居中间环；而一般的应用程序，则被安排在外环上</li>
<li>一个程序可以访问驻留在相同环或较低特权环中的数据</li>
<li>一个程序可以调用驻留在相同环或较高特权环中的服务</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="Chapter-14-15：设备管理"><a href="#Chapter-14-15：设备管理" class="headerlink" title="#Chapter 14-15：设备管理"></a>#Chapter 14-15：设备管理</h2><ul>
<li>管理的对象：I/O设备或I/O通道</li>
<li>基本任务：提高利用率，提高速度</li>
<li>主要功能：缓冲区分配，设备分配，设备处理，虚拟设备，实现设备独立性</li>
<li>特点：外设种类多，差异大</li>
<li>目的：外设资源的控制，外设资源的共享，提高外设资源的利用率</li>
</ul>
<h3 id="I-O系统"><a href="#I-O系统" class="headerlink" title="#I/O系统"></a>#I/O系统</h3><h4 id="I-O设备"><a href="#I-O设备" class="headerlink" title="#I/O设备"></a>#I/O设备</h4><ol>
<li><p>I/O设备的类型</p>
<ol>
<li><p>按传输速率分类</p>
<ul>
<li>低速设备</li>
<li>中速设备</li>
<li>高速设备</li>
</ul>
</li>
<li><p>按信息交换的单位分类</p>
<ul>
<li>块设备<ul>
<li>传输速率高</li>
<li>可寻址，即支持随机读写</li>
<li>常采用DMA方式</li>
</ul>
</li>
<li>字符设备<ul>
<li>传输速率低，常采用中断驱动方式</li>
</ul>
</li>
</ul>
</li>
<li><p>按设备共享属性分类</p>
<ul>
<li><p>独占设备：即临界资源</p>
</li>
<li><p>共享设备</p>
</li>
<li><p>虚拟设备：通过虚拟技术将一台独占设备变换为若干台逻辑设备</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>设备与控制器之间的接口（联动华栋）</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/9f8ac43c-266b-4834-a21c-f63e4b50d4df/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=781ce9ffa12723d573fb3c534756198d9199c3c443c16c8245f217ea75b36001&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="设备控制器"><a href="#设备控制器" class="headerlink" title="#设备控制器"></a>#设备控制器</h4><ol>
<li><p>基本功能</p>
<ul>
<li><p>接收和识别命令</p>
</li>
<li><p>数据交换</p>
</li>
<li><p>标识和报告设备状态</p>
</li>
<li><p>地址识别</p>
</li>
<li><p>数据缓冲</p>
</li>
<li><p>差错控制</p>
</li>
</ul>
</li>
<li><p>组成</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/5712efd5-8dfd-48b8-a8be-c7571cb7eb6f/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=f9d5046d1ad34b0adecb86580492b1ce993419d051fbdd37ef2b1c7574a3f2d5&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ol>
<h4 id="I-O通道"><a href="#I-O通道" class="headerlink" title="#I/O通道"></a>#<strong>I/O通道</strong></h4><ol>
<li><p>引入</p>
<p>一种特殊的处理机，具有执行I/O指令的能力，并通过执行通道（I/O）程序来控制I/O操作</p>
<p>与一般处理机不同</p>
<ul>
<li><p>指令类型单一</p>
</li>
<li><p>没有自己的内存（<strong>与CPU共享内存</strong>）</p>
</li>
</ul>
</li>
<li><p>通道类型</p>
<ol>
<li><p>字节多路通道（以字节为传送单位）  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/84405a94-a1bc-4255-9b40-91384fc59f74/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=d911afa023a31791828022fc49922d2ee1e3526cf2c256864a90b7f0bc4b07da&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>数组选择通道（以数组为传送单位）</p>
<p>只含有一个分配型子通道，可以连接多台高速设备，在一段时间内只能执行一道通道程序。</p>
<p>当某台设备占用了该通道后，便一直由它独占， 即使是它无数据传送，通道被闲置。</p>
<p>速率高但利用率很低。</p>
</li>
<li><p>数组多路通道</p>
<p>将数组选择通道传输速率高和字节多路通道能使各子通道(设备)分时并行操作的优点相结合而形成的一种新通道。它含有多个非分配型子通道。</p>
</li>
</ol>
</li>
</ol>
<ol>
<li>“瓶颈”问题</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/086d54cc-3ee4-4487-adb8-f02c5f7bcf54/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=740f2048e3dd66145f3cdfab9cd1af2adfbbb41d0d6fcb214201eba819f7d02c&X-Amz-SignedHeaders=host" alt="单通路I/O系统"></p>
<p>单通路I/O系统</p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/ba64b128-4c19-40f0-bbe9-c7e67b996840/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=5b96b830cc4fb67a54560acc64a56b3185d9c53f8073032f5deff339f7f76d2c&X-Amz-SignedHeaders=host" alt="多通路I/O系统">多通路I/O系统<img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0913e929-5c90-4a65-8a92-c0319d8bb48d/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=d7ad9c278276cea6e28a28b501f9afa5dafafa5e1a4c455c94c98353f0dd4069&X-Amz-SignedHeaders=host" alt="总线型I/O系统">总线型I/O系统<img src="" alt="img"></p>
<h3 id="I-O控制方式"><a href="#I-O控制方式" class="headerlink" title="#I/O控制方式"></a>#I/O控制方式</h3><h4 id="程序I-O方式"><a href="#程序I-O方式" class="headerlink" title="#程序I/O方式"></a>#程序I/O方式</h4><p>I/O操作由程序发起，并<strong>等待</strong>操作完成，数据每次读写经过CPU。</p>
<p>缺点：等待</p>
<h4 id="中断驱动I-O方式"><a href="#中断驱动I-O方式" class="headerlink" title="#中断驱动I/O方式"></a>#中断驱动I/O方式</h4><p>I/O操作由程序发起，在操作完成时（如数据可读或已经写入）由外设向CPU发出中断，通知该程序。数据的每次读写通过CPU。</p>
<p>优点：不等待</p>
<p>缺点：CPU每次处理的数据量少</p>
<h4 id="DMD-I-O-方式"><a href="#DMD-I-O-方式" class="headerlink" title="#DMD I/O 方式"></a>#DMD I/O 方式</h4><p>由程序设置DMA控制器中的若干寄存器值（如内存始址，传送字节数），然后发起I/O操作，而后者完成内存与外设的成批数据交换，在操作完成时由DMA控制器向CPU发出中断。</p>
<p>优点：CPU只需干预I/O操作的开始和结束，而其中的一批数据读写无需CPU控制，适于高速设备。</p>
<p>特点：</p>
<ul>
<li>数据传输基本单位是数据块</li>
<li>数据直接在设备和内存间传输</li>
<li>仅在一次传送开始和结束时需要CPU干涉，整块数据传送由控制器控制</li>
</ul>
<p>工作过程  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/ea06f9fd-1a0c-49b6-8ef8-4bb13f46c8bc/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=7add5f352c34b4720f1ab6a77fc03d98cfd1bf7c3f49b0992f93c8162530cec9&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="I-O通道控制方式"><a href="#I-O通道控制方式" class="headerlink" title="#I/O通道控制方式"></a>#I/O通道控制方式</h4><p>DMA方式的发展，进一步减少CPU的干预，即把对一个数据块的读(或写)为单位的干预，减少为对一组数据块的读(或写)及有关的控制和管理为单位的干预。</p>
<p>又可实现CPU、通道和I/O设备三者的并行操作，从而更有效地提高整个系统的资源利用率。</p>
<ul>
<li><p>通道程序</p>
<p>通道通过执行通道程序，并与设备控制器共同实现对I/O设备的控制。</p>
<p>由一系列的通道指令(或称为通道命令)所构成。</p>
<p>每条指令包含下列信息</p>
<ul>
<li>操作码</li>
<li>内存地址</li>
<li>计数</li>
<li>通道程序结束位</li>
<li>记录结束标志</li>
</ul>
</li>
</ul>
<h3 id="缓冲管理"><a href="#缓冲管理" class="headerlink" title="#缓冲管理"></a>#缓冲管理</h3><h4 id="缓冲的引入"><a href="#缓冲的引入" class="headerlink" title="#缓冲的引入"></a>#<strong>缓冲的引入</strong></h4><ul>
<li>缓和CPU与I/O设备间数据不匹配的矛盾</li>
<li>减少对CPU的中断频率，放宽对CPU中断响应时间的限制</li>
<li>提高CPU和I/O设备间并行性</li>
</ul>
<h4 id="单缓冲和双缓冲"><a href="#单缓冲和双缓冲" class="headerlink" title="#单缓冲和双缓冲"></a>#单缓冲和双缓冲</h4><ol>
<li><p>单缓冲  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/6a2c7058-0395-400c-a853-d23f1df8ce73/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=484b507ac7ea84ae9e4ec0f085a223388a5d6dc7fec3c9b93fe8eb3059a84981&X-Amz-SignedHeaders=host" alt="img"></p>
<p>对一块数据处理时间为 max(T, C) + M</p>
</li>
<li><p>双缓冲  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/420e615d-43f7-4250-b28f-4d3d3519b390/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=337e00a60a0127d337dc6e64b6440d08bac43eacd97a8da5e07c26363b277f12&X-Amz-SignedHeaders=host" alt="img"></p>
<p>对一块数据处理时间为max(T, C + M)</p>
</li>
</ol>
<h4 id="循环缓冲"><a href="#循环缓冲" class="headerlink" title="#循环缓冲"></a>#循环缓冲</h4><ol>
<li><p>循环缓冲的组成（多个缓冲区，三个指针）  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/7001e0d6-a372-40ee-aa8d-9f5136e699a1/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=fcfc598abd395ffea4a8f523c0a7a4fab2b256551f4040cc70b397c3ee7f0147&X-Amz-SignedHeaders=host" alt="img"></p>
<p>Nexti：空缓冲区</p>
<p>Nextg：进程下个可用缓冲区</p>
<p>current：进程当前正在使用缓冲区</p>
</li>
</ol>
<h4 id="缓冲池（多进程能有效的同时处理输入输出）"><a href="#缓冲池（多进程能有效的同时处理输入输出）" class="headerlink" title="#缓冲池（多进程能有效的同时处理输入输出）"></a>#缓冲池<strong>（多进程能有效的同时处理输入输出）</strong></h4><ol>
<li><p>缓冲池的组成</p>
<p>至少含有空闲缓冲区、装满输入数据缓冲区、装满输出数据缓冲区，对应三个队列</p>
<ul>
<li>空缓冲队列</li>
<li>输入队列</li>
<li>输出队列</li>
</ul>
<p>还需四种工作缓冲区</p>
<ul>
<li><p>收容输入数据</p>
</li>
<li><p>提取输入数据</p>
</li>
<li><p>收容输出数据</p>
</li>
<li><p>提取输出数据</p>
</li>
</ul>
</li>
<li><p>Getbuf和Putbuf  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/473c4328-6806-4292-9599-aeff9b6f3a60/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=65cdb05ff973490c126c4dda320f1844456affaf02e518c45c5f775510b07f77&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
<li><p>缓冲区的工作方式</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/44cda281-2ae7-4771-91dc-9d9fb86ea0d6/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=9319c605fb282469d217839e86b4e924506d2af7897244d5679a00e69f2c0cbc&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h3 id="设备分配"><a href="#设备分配" class="headerlink" title="#设备分配"></a>#设备分配</h3><p>设备分配是对进程使用外设过程的管理。</p>
<h4 id="设备分配数据结构"><a href="#设备分配数据结构" class="headerlink" title="#设备分配数据结构"></a>#设备分配数据结构</h4><ol>
<li><p>设备控制表（DCT）</p>
<p>每个设备一张，描述设备特性和状态</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/822242fa-6ed5-453f-9077-ba7db58d9461/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=f332ad3e79b72a7ca0194dd9370b6d7f56fd77111de09544b013c456b5a7b953&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ul>
<li>系统设备表：系统内一张，反应系统中设备资源的状态</li>
<li>控制器控制表：每个控制器一张，描述I/O控制器的配置和状态</li>
</ul>
<h4 id="设备分配原则"><a href="#设备分配原则" class="headerlink" title="#设备分配原则"></a>#设备分配原则</h4><p>原则：合理使用外设（公平和避免死锁），提高设备利用率</p>
<ul>
<li>静态分配：进程创建时分配，退出时释放<ul>
<li>不出现死锁</li>
<li>利用率不高</li>
</ul>
</li>
<li>动态分配<ul>
<li>需要考虑死锁</li>
<li>提高设备利用率</li>
<li>针对特定设备采用特定分配策略<ul>
<li>FCFS</li>
<li>基于优先级</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="设备独立性"><a href="#设备独立性" class="headerlink" title="#设备独立性"></a>#设备独立性</h4><ol>
<li><p>概念</p>
<p>也称设备无关性</p>
<ul>
<li>应用程序独立于具体使用的物理设备</li>
<li>引入逻辑设备和物理设备两个概念</li>
<li>应用程序中使用逻辑设备名称请求某类设备；系统实际执行时，使用物理设备名称</li>
</ul>
</li>
<li><p>设备独立性软件</p>
<ol>
<li>执行所有设备的公有操作<ul>
<li>对独立设备的分配与回收</li>
<li>将逻辑设备名映射为物理设备名，进一步可以找到相应物理设备的驱动程序</li>
<li>对设备进行保护，禁止用户直接访问设备</li>
<li>缓冲管理，即对字符设备和块设备的缓冲区进行有效的管理， 以提高I/O的效率</li>
<li>差错控制。由于在I/O操作中的绝大多数错误都与设备无关，故主要由设备驱动程序处理，而设备独立性软件只处理那些设备驱动程序无法处理的错误</li>
</ul>
</li>
<li>向用户层（或文件层）软件提供统一接口</li>
</ol>
</li>
</ol>
<h4 id="SPOOLing技术"><a href="#SPOOLing技术" class="headerlink" title="#SPOOLing技术"></a>#<strong>SPOOLing技术</strong></h4><p>利用假脱机技术，可以把独享设备转变成具有共享特征的虚拟设备，从而提高设备利用率。</p>
<ol>
<li><p>引入</p>
<p>在多道批处理系统中，专门利用一道程序（SPOOLing程序）来完成对设备的I/O操作。无需使用外围I/O处理机。  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/67e63a3f-7514-471c-9f3b-f86dddc4daf1/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=335850918f4145943ba63c02f15d902c00033c751845cf3e1976e68889cc89be&X-Amz-SignedHeaders=host" alt="img"></p>
<p>原理：</p>
<ul>
<li><p>SPOOLing程序和外设进行数据交换，可以称为“实际I/O”。</p>
<ul>
<li>一方面，SPOOLing程序预先从外设输入数据并加以缓冲，在以后需要的时候输入到应用程序；</li>
<li>另一方面，SPOOLing程序接受应用程序的输出数据并加以缓冲，在以后适当的时候输出到外设。</li>
</ul>
</li>
<li><p>在SPOOLing程序中，需要管理两级缓冲区：内存缓冲区和快速外存上的缓冲池，后者可以暂存多批I/O操作的较多数据。</p>
</li>
<li><p>应用程序进行I/O操作时，只是和SPOOLing程序交换数据，可以称为“虚拟I/O”。</p>
<p>这时虚拟I/O实际上是从SPOOLing程序的缓冲池中读出数据或把数据送入缓冲池，而不是跟实际的外设进行I/O操作。</p>
</li>
</ul>
</li>
<li><p>SPOOLing系统的组成</p>
<ol>
<li><p>输入井和输出井</p>
<p>在<strong>磁盘上</strong>开辟的两个大存储空间。</p>
<p>输入井是模拟脱机输入时的磁盘，用于<strong>收容</strong>I／O设备输入的数据</p>
<p>输出井是模拟脱机输出时的磁盘，用于<strong>收容</strong>用户程序的输出数据</p>
</li>
<li><p>输入缓冲区和输出缓冲区</p>
<p>在<strong>内存中</strong>开辟两个缓冲区。</p>
<p>输入缓冲区用于<strong>暂存</strong>由输入设备送来的数据，以后再传送到输入井</p>
<p>输出缓冲区用于<strong>暂存</strong>从输出井送来的数据，以后再传送给输出设备</p>
</li>
<li><p><strong>输入进程SPi和输出进程SPo</strong></p>
<p>SPi进程模拟脱机输入时的外围控制机，将用户要求的数据从输入设备，通过输入缓冲区再送到输入井。当CPU需要输入数据时，直接从输入井读入内存。</p>
<p>SPo进程模拟脱机输出时的外围控制机，把用户要求输出的数据，先从内存送到输出井，待输出设备空闲时，再将输出井中的数据，经过输出缓冲区送到输出设备上</p>
</li>
</ol>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/88f0f1cb-1d7e-4c89-be0d-dbf6c6b61395/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=30302069b0f3290f10ced98ce0c8ce4d892522cc70ed623da82af746e791ec6d&X-Amz-SignedHeaders=host" alt="系统组成"></p>
<p>系统组成</p>
<p><img src="" alt="img"></p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/568ad217-d249-4260-96f7-1a1bb0723e64/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=17978896983fbf881cb974167d4032b5e5193f361be521f6305e7f249ccbb25d&X-Amz-SignedHeaders=host" alt="工作原理"></p>
<p>工作原理</p>
<p><img src="" alt="img"></p>
<ol>
<li><p>共享打印机</p>
<p>当用户进程请求打印输出时， SPOOLing系统同意为它打印输出， 但并不真正立即把打印机分配给该用户进程， 而只为它做两件事</p>
<ul>
<li>由输出进程在输出井中为之申请一个空闲磁盘块区， 并将要打印的数据送入其中</li>
<li>输出进程再为用户进程申请一张空白的用户请求打印表，并将用户的打印要求填入其中， 再将该表挂到请求打印队列上</li>
</ul>
</li>
</ol>
<ol>
<li><p><strong>SPOOLing系统的特点</strong></p>
<ul>
<li><p>提高了I/O速度</p>
</li>
<li><p>将独占设备改造为共享设备</p>
</li>
<li><p>实现了虚拟设备功能</p>
</li>
</ul>
</li>
</ol>
<ul>
<li>什么是虚拟设备？实现虚拟设备的关键技术是什么？ 虚拟设备是通过某种虚拟技术，将一台物理设备变换成若干台逻辑设备，从而实现多个用户对该物理设备的同时共享。由于多台逻辑设备事实上不存在，而只是给用户的一种感觉，因此被称作虚拟设备。 常通过在可共享的、高速的磁盘上开辟两个大的存储空间(即输入井和输出井)以及预输入、缓冲输出技术来实现。预输入和缓输出可通过脱机和假脱机技术实现，<strong>假脱机是目前使用最广泛的虚拟设备技术</strong>。</li>
</ul>
<h3 id="设备控制"><a href="#设备控制" class="headerlink" title="#设备控制"></a>#设备控制</h3><h4 id="设备的控制过程"><a href="#设备的控制过程" class="headerlink" title="#设备的控制过程"></a>#设备的控制过程</h4><ol>
<li>转换</li>
<li>合法性检查</li>
<li>可用性检查</li>
<li>参数设置</li>
<li>启动I/O</li>
<li>中断处理</li>
</ol>
<h4 id="设备控制过程的实现方式"><a href="#设备控制过程的实现方式" class="headerlink" title="#设备控制过程的实现方式"></a>#设备控制过程的实现方式</h4><ul>
<li>作为应用进程的一部分执行：与程序控制I/O相对应，难以对外设发出的中断作实时响应</li>
<li>作为系统进程执行：每类设备一个进程，或整个系统一个进程处理各类设备</li>
<li>不设进程，作为OS核心中的设备驱动程序</li>
</ul>
<h4 id="设备驱动程序"><a href="#设备驱动程序" class="headerlink" title="#设备驱动程序"></a>#设备驱动程序</h4><p>I/O处理功能的低级系统例程。</p>
<p>特征：</p>
<ul>
<li><p>中转数据和控制</p>
</li>
<li><p>与硬件特性密切相关</p>
</li>
<li><p>向上屏蔽设备细节</p>
</li>
</ul>
<p>处理过程（主要任务是启动设备）：</p>
<ol>
<li>将抽象要求转换为具体要求</li>
<li>检查I/O请求的合法性</li>
<li>读出和检查设备的状态</li>
<li>传送必要的参数</li>
<li>工作方式的设置</li>
<li>启动I/O设备</li>
</ol>
<h3 id="磁盘设备管理"><a href="#磁盘设备管理" class="headerlink" title="#磁盘设备管理"></a>#磁盘设备管理</h3><p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/5b5f10e0-70c3-42ad-8b1e-e4e15f49dbc1/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=73ae00ca28da4a0f402a9622b4f09049f77e5331df8e24d4b1eaaa11ff9ebcdf&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="磁盘I-O访问时间的组成"><a href="#磁盘I-O访问时间的组成" class="headerlink" title="#磁盘I/O访问时间的组成"></a>#磁盘I/O访问时间的组成</h4><ul>
<li>柱面定位时间：磁头移动到指定柱面时间</li>
<li>旋转延迟时间：磁头旋转到指定扇区时间，与磁盘转速相关</li>
<li>数据传送时间</li>
</ul>
<p>由于<strong>柱面定位时间在访问时间中占主要部分</strong>，合理组成磁盘数据的存储位置可提高磁盘I/O性能。</p>
<h4 id="磁盘I-O调度策略"><a href="#磁盘I-O调度策略" class="headerlink" title="#磁盘I/O调度策略"></a>#磁盘I/O调度策略</h4><ol>
<li><p>先来先服务（FCFS）</p>
</li>
<li><p>最短寻道时间优先（SSTF）</p>
<p>磁臂粘着：有一个或几个进程对某一磁道有较高的访问频率，即这个(些)进程反复请求对某一磁道的I/O操作，从而垄断了整个磁盘设备。</p>
</li>
<li><p>SCAN算法（电梯算法）</p>
<p>先按一个方向找最近，到尽头再换方向</p>
</li>
<li><p>循环扫描算法（CSCAN）</p>
<p>只按一个方向，到尽头就循环从头开始</p>
</li>
<li><p>NStepSCAN算法</p>
<ol>
<li>N步SCAN是将磁盘请求队列<strong>分成若干长度为N的子队列</strong>，磁盘调度将按FCFS算法依次处理这些子队列。</li>
<li>每个子队列按SCAN算法处理完后，才处理其它子队列</li>
<li>新请求放入其它队列；避免粘着</li>
<li>但是当N取值很大时，算法类似于SCAN；N=1时，算法退化为FCFS</li>
</ol>
</li>
<li><p>FSCAN算法（N步SCAN算法的简化）</p>
<p>将磁盘请求队列分为<strong>两个子队列</strong></p>
<ul>
<li>一个是由当前所有请求磁盘I/O的进程形成的队列，由磁盘调度按SCAN算法进行处理。</li>
<li>另一个是在扫描期间，将新出现的所有请求磁盘I/O的进程放入等待处理的请求队列。</li>
<li>所有新请求被推迟到下一次扫描时处理。</li>
</ul>
</li>
</ol>
<h2 id="Chapter-16：文件管理"><a href="#Chapter-16：文件管理" class="headerlink" title="#Chapter 16：文件管理"></a>#Chapter 16：文件管理</h2><h3 id="文件，抽象的磁盘块集合"><a href="#文件，抽象的磁盘块集合" class="headerlink" title="#文件，抽象的磁盘块集合"></a>#文件，抽象的磁盘块集合</h3><h4 id="文件，磁盘，数据项"><a href="#文件，磁盘，数据项" class="headerlink" title="#文件，磁盘，数据项"></a>#文件，磁盘，数据项</h4><ul>
<li><p>文件是数据的一种组织形式，指具有文件名的若干相关元素的集合。</p>
</li>
<li><p>文件管理系统：是指文件和对文件进行操纵和管理的软件集合</p>
</li>
<li><p>文件系统中数据的分类：数据项、记录和文件三级。  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/fec81775-24a9-4793-b210-60355fe2bd20/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=3876323366426580d8885b059139ed625ac2e42efba0a17091979d031e694ca7&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ul>
<h3 id="文件系统，抽象整个磁盘"><a href="#文件系统，抽象整个磁盘" class="headerlink" title="#文件系统，抽象整个磁盘"></a>#文件系统，抽象整个磁盘</h3><h4 id="文件系统模型"><a href="#文件系统模型" class="headerlink" title="#文件系统模型  "></a>#文件系统模型  <img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/424cf052-5a47-463e-a39d-9a6e1a7ffadd/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=902edbdb9e17cba81e9ef9de6759b82361af0487d034d9db74f0c76588093f4a&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></h4><ol>
<li><p>对象及其属性</p>
<ol>
<li>文件</li>
<li>目录</li>
<li>磁盘存储空间</li>
</ol>
</li>
<li><p>文件系统</p>
<p>对对象操纵和管理的文件集合</p>
<ul>
<li>对文件存储空间的管理</li>
<li>对文件目录的管理</li>
<li>用于将文件的逻辑地址转换为物理地址的机制</li>
<li>对文件读和写的管理</li>
<li>对文件的共享与保护等功能</li>
</ul>
</li>
<li><p>文件系统的接口</p>
<ul>
<li>命令接口：用户与文件系统交互</li>
<li>程序接口：用户程序与文件系统交互</li>
</ul>
</li>
</ol>
<h4 id="文件系统的功能"><a href="#文件系统的功能" class="headerlink" title="#文件系统的功能"></a>#文件系统的功能</h4><ul>
<li>实现从逻辑文件到物理文件的转换</li>
<li>有效的分配文件的存储空间</li>
<li>建立文件目录</li>
<li>提供合理的存取方法适应不同的环境</li>
<li>提供文件的共享、保护和保密</li>
<li>提供一组文件操作</li>
</ul>
<h3 id="文件的逻辑结构"><a href="#文件的逻辑结构" class="headerlink" title="#文件的逻辑结构"></a>#文件的逻辑结构</h3><h4 id="文件逻辑结构的类型"><a href="#文件逻辑结构的类型" class="headerlink" title="#文件逻辑结构的类型"></a>#文件逻辑结构的类型</h4><ol>
<li>有结构文件（记录文件）<ul>
<li>定长记录</li>
<li>变长记录</li>
<li>顺序文件</li>
<li>索引文件</li>
<li>索引顺序文件</li>
</ul>
</li>
<li>无结构文件（流式文件）</li>
</ol>
<h4 id="顺序文件"><a href="#顺序文件" class="headerlink" title="#顺序文件"></a>#顺序文件</h4><ol>
<li>逻辑记录的排序</li>
<li>只有顺序文件才能存储在磁带上</li>
<li>缺点<ul>
<li>需要逐个查找记录</li>
<li>难以增删</li>
</ul>
</li>
</ol>
<h4 id="索引文件"><a href="#索引文件" class="headerlink" title="#索引文件  "></a>#索引文件  <img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/5ef81ee9-9000-40dd-ad34-defefaca8299/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=5ecc1aa224e3c3b6a8c805ec48cc2d835f0bc3e46314566c83090e6741038afe&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></h4><h4 id="索引顺序文件"><a href="#索引顺序文件" class="headerlink" title="#索引顺序文件"></a>#索引顺序文件</h4><p>顺序文件分为若干组，每组第一个记录放入索引表  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/fe05260e-fd54-4ee2-9c0f-56239d9d6946/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=2c38feeacdea609e1e4851d1da4a80f50958b03b92a9f8bf622783354cdaa8e9&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<h4 id="直接文件和哈希文件"><a href="#直接文件和哈希文件" class="headerlink" title="#直接文件和哈希文件"></a>#直接文件和哈希文件</h4><p>根据给定的记录键值直接获得指定记录的物理地址  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/8c0230dd-68ee-4fd5-8d1f-0af534563df9/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=6bacee71e08eb8a50b52b693aec4eeaeffcae25ac4c88eeabe1431cdbed82834&X-Amz-SignedHeaders=host" alt="img"></p>
<p>哈希文件是最常见的直接文件。</p>
<h3 id="外存分配方式（物理结构）"><a href="#外存分配方式（物理结构）" class="headerlink" title="#外存分配方式（物理结构）"></a>#外存分配方式（物理结构）</h3><h4 id="连续分配"><a href="#连续分配" class="headerlink" title="#连续分配  "></a>#连续分配  <img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/4e3c32b8-42d7-46a2-a52d-72818a56843b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=87351d93d1b94fa2849c74db2e3ce855e546b6c5800a84524d6959ca4770b5ff&X-Amz-SignedHeaders=host" alt="img"><img src="" alt="img"></h4><ul>
<li>优点<ul>
<li>顺序访问容易</li>
<li>顺序访问速度快</li>
</ul>
</li>
<li>缺点<ul>
<li>要求有连续的存储空间</li>
<li>必须事先知道文件长度</li>
</ul>
</li>
</ul>
<h4 id="链接分配"><a href="#链接分配" class="headerlink" title="#链接分配"></a>#链接分配</h4><ol>
<li>隐式链接</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/118c8bd9-955a-4f98-aa31-9a748af79d39/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=7a0670cf2a721d5af029fde81e9ebe7caa592329100414ec40ad13db87a2c8da&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ol>
<li><p>显式链接  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/0fe814f8-41ef-4a9c-a37c-b6efd96b1cfb/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=59c537e68ef0cde9333196883f90c52e02b6b879589ab50489f5cb0e12611cea&X-Amz-SignedHeaders=host" alt="img"></p>
</li>
</ol>
<h4 id="索引分配"><a href="#索引分配" class="headerlink" title="#索引分配"></a>#索引分配</h4><ol>
<li>单级索引分配</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/022c1812-8437-4fc0-822d-19aa3457c7d9/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=ec43593d3aa5458e8468ed3c62df144b5e9a766532b5859b36e446284ac46844&X-Amz-SignedHeaders=host" alt="img"></p>
<p><img src="" alt="img"></p>
<ol>
<li><p>多级索引分配  </p>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/d6cddd42-cbbe-4141-8457-720e47b1092e/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=7edf7d0c9755e94797aba141c590da9a477ad391f1c93d54de4a4abfa7fba942&X-Amz-SignedHeaders=host" alt="多级索引"></p>
<p>多级索引</p>
</li>
</ol>
<p><img src="https://oss.chive.vaa.la/outline/uploads/63d01824-bff0-49f4-8ddd-f038dbf1aa06/233ac4c0-da35-49f3-9944-b3b60f272a7b/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=sfedkavphknbrs/20211225/cn-chive-1/s3/aws4_request&X-Amz-Date=20211225T121649Z&X-Amz-Expires=60&X-Amz-Signature=3b25b9e33b80abf34574eae2aa695582575666af67550aacf118403976aed1de&X-Amz-SignedHeaders=host" alt="混合索引"></p>
<p>混合索引</p>
<p><img src="" alt="img"></p>
<h3 id="目录管理"><a href="#目录管理" class="headerlink" title="#目录管理"></a>#目录管理</h3><h4 id="文件控制块FCB和索引节点"><a href="#文件控制块FCB和索引节点" class="headerlink" title="#文件控制块FCB和索引节点"></a>#文件控制块FCB和索引节点</h4><ol>
<li>文件控制块<ol>
<li>基本信息类<ul>
<li>文件名</li>
<li>文件物理位置</li>
<li>文件逻辑结构</li>
<li>文件物理结构</li>
</ul>
</li>
<li>存取控制信息类</li>
<li>使用信息类</li>
</ol>
</li>
</ol>
<h4 id="目录结构"><a href="#目录结构" class="headerlink" title="#目录结构"></a>#目录结构</h4><ol>
<li>单级目录结构<ul>
<li>查找速度慢</li>
<li>不允许重名</li>
<li>不便于实现文件共享</li>
</ul>
</li>
<li>两级目录</li>
<li>多级目录结构</li>
</ol>
<h2 id="Extension：翻转课堂PPT😅"><a href="#Extension：翻转课堂PPT😅" class="headerlink" title="#Extension：翻转课堂PPT😅"></a>#Extension：翻转课堂PPT😅</h2><p>自己看</p>

      </section>

      
      
        <nav class="article-nav">
          
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/project/2022/01/03/hello-world/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">Hello World</h2>
        </a>
      
      <div class="card-text--row">Older</div>
    </div>
  </article>
</div>
          
        </nav>
      

      <section class="page-message-container layout-padding">
        


  
  

  
  


      </section>
    </div>
    <div class="widget-info">
      <section class="widget-author widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-body">
    
      <img src="https://s.gravatar.com/avatar/2d6b803eea37de0257620d5fabee7e64?s=200&amp;r=g&amp;d=retro" class="soft-size--round soft-style--box" alt="倦倚">
    
    
      <h2>倦倚</h2>
    
    
      <p>贵在坚持</p>
    

    <div class="count-box">
      <div class="count-box--item">
        <svg class="icon icon-article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M240.51564747 647.74217627h196.07203239c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806V165.10332731c0-33.18142087-30.16492806-60.32985613-60.32985612-60.32985611H245.04038668C225.43318342 104.7734712 210.35071939 119.85593522 210.35071939 139.46313845V617.57724821c0 16.59071043 13.57421762 30.16492806 30.16492808 30.16492806z m663.62841731-452.47392089v482.63884894c0 33.18142087-27.14843525 60.32985613-60.32985612 60.32985613H180.18579134c-33.18142087 0-60.32985613-27.14843525-60.32985612-60.32985613V195.26825538c-49.77213131 0-90.49478418 40.72265287-90.49478417 90.49478417v452.4739209c0 49.77213131 40.72265287 90.49478418 90.49478417 90.49478417h286.56681657c16.59071043 0 30.16492806 13.57421762 30.16492807 30.16492807s13.57421762 30.16492806 30.16492805 30.16492806h90.49478418c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806s13.57421762-30.16492806 30.16492807-30.16492807h286.56681657c49.77213131 0 90.49478418-40.72265287 90.49478417-90.49478417V285.76303955c0-49.77213131-40.72265287-90.49478418-90.49478417-90.49478417zM587.41232014 647.74217627h191.54729318c19.60720323 0 34.68966726-15.08246403 34.68966729-34.68966727V134.93839925c0-16.59071043-13.57421762-30.16492806-30.16492808-30.16492805H617.57724821c-30.16492806 0-60.32985613 27.14843525-60.32985612 60.32985611v452.4739209c0 16.59071043 13.57421762 30.16492806 30.16492805 30.16492806z" fill="currentColor"></path>
</svg>
        <span>2</span>
      </div>
      <div class="count-box--item">
        <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
        0
      </div>
      <div class="count-box--item">
        <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
        1
      </div>
    </div>
  </div>
</section>

      

      
<section class="widet-notice widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-notice" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 945.02305225v28.15620663a24.27259221 24.27259221 0 0 1-24.27259221 24.27259335H394.0352a48.54518557 48.54518557 0 0 1-41.74885888-23.78714112l-110.68302222-184.47170332a132.04290333 132.04290333 0 0 1-17.47626667-48.54518557h118.4502511a200.97706667 200.97706667 0 0 1 76.21594113 14.56355556l20.38897777 133.49925888a48.54518557 48.54518557 0 0 0 36.40888888 27.67075555l16.01991111 2.91271112a24.27259221 24.27259221 0 0 1 20.38897778 25.72894889zM997.45185223 463.45481443a194.18074112 194.18074112 0 0 1-38.8361489 116.50844445 24.75804445 24.75804445 0 0 1-36.4088889 0l-34.95253333-34.95253333a24.27259221 24.27259221 0 0 1-2.91271111-30.58346667 97.09036999 97.09036999 0 0 0 0-106.79940665 24.27259221 24.27259221 0 0 1 2.91271111-30.58346666l34.95253333-34.95253334a24.75804445 24.75804445 0 0 1 18.93262223-7.28177777 26.2144 26.2144 0 0 1 17.47626667 9.70903665A194.18074112 194.18074112 0 0 1 997.45185223 463.45481443z m-194.18074112-388.36148111v776.72296335a48.54518557 48.54518557 0 0 1-48.54518556 48.54518443h-28.64165888a48.54518557 48.54518557 0 0 1-33.98163001-14.07810332l-145.63555556-143.20829668A291.27111111 291.27111111 0 0 0 342.57730333 657.63555556H172.18370333a145.63555556 145.63555556 0 0 1-145.63555556-145.63555556v-97.09036999a145.63555556 145.63555556 0 0 1 145.63555556-145.63555556h170.3936a291.27111111 291.27111111 0 0 0 206.31703779-85.43952668l145.63555555-143.20829554a48.54518557 48.54518557 0 0 1 33.98162888-14.07810446H754.72592555a48.54518557 48.54518557 0 0 1 48.54518556 48.54518555z" fill="currentColor"></path>
</svg>
    <span>NOTICE</span>
  </div>
  <div class="widget-body">
    <p>flex-block主题部分重构，详情查看https://github.com/miiiku/flex-block</p>
  </div>
</section>


      <section class="widget-categorys widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
    <span>CATEGORYS</span>
  </div>
  <div class="widget-body">
    <ul class="categorys-list">
      
    </ul>
  </div>
</section>

      <section class="widget-tags widget-item  layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
    <span>TAGS</span>
  </div>
  <div class="widget-body">
    <div class="tags-cloud">
      <a href="/project/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" style="font-size: 10px;" class="tags-cloud-0">专业课</a>
    </div>
  </div>
</section>
    </div>
  </article>
</div>

    <!-- footer container -->
<footer id="footer" class="footer">
  <div class="footer-container">
    
    <div class="social-icons">
      
        
      
        
      
        
      
        
          <a href="https://github.com/miiiku/" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
</svg>
          </a>
        
      
        
          <a href="https://twitter.com/guanquanhong" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-twitter" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571 0.571429 8 0.571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143 0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429 0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429 0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571l0-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714 0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"></path>
</svg>
          </a>
        
      
        
          <a href="https://www.google.co.uk/" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="1 1 176 176"><style><![CDATA[.B{clip-path:url(#C)}.C{fill:#3e2723}.D{fill-opacity:.15}.E{fill-opacity:.2}]]></style><defs><circle id="A" cx="96" cy="96" r="88"/><path id="B" d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z"/></defs><clipPath id="C"><use xlink:href="#A"/></clipPath><g class="B" transform="translate(-7 -7)"><path d="M21.97 8v108h39.4L96 56h88V8z" fill="#db4437"/><linearGradient id="D" x1="29.34" x2="81.84" y1="75.02" y2="44.35" gradientUnits="userSpaceOnUse"><stop stop-color="#a52714" stop-opacity=".6" offset="0"/><stop stop-color="#a52714" stop-opacity="0" offset=".66"/></linearGradient><path d="M21.97 8v108h39.4L96 56h88V8z" fill="url(#D)"/><path d="M62.3 115.6L22.48 47.3l-.58 1 39.54 67.8z" class="C D"/><use xlink:href="#B" fill="#0f9d58"/><linearGradient id="E" x1="110.9" x2="52.54" y1="164.5" y2="130.3" gradientUnits="userSpaceOnUse"><stop stop-color="#055524" stop-opacity=".4" offset="0"/><stop stop-color="#055524" stop-opacity="0" offset=".33"/></linearGradient><path d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z" fill="url(#E)"/><path d="M129.8 117.3l-.83-.48-38.4 67.15h1.15l38.1-66.64z" fill="#263238" class="D"/><defs><path id="F" d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z"/></defs><clipPath id="G"><use xlink:href="#F"/></clipPath><g clip-path="url(#G)"><path d="M96 56l34.65 60-38.88 68H184V56z" fill="#ffcd40"/><linearGradient id="H" x1="121.9" x2="136.6" y1="49.8" y2="114.1" gradientUnits="userSpaceOnUse"><stop stop-color="#ea6100" stop-opacity=".3" offset="0"/><stop stop-color="#ea6100" stop-opacity="0" offset=".66"/></linearGradient><path d="M96 56l34.65 60-38.88 68H184V56z" fill="url(#H)"/></g><path d="M96 56l34.65 60-38.88 68H184V56z" fill="#ffcd40"/><path d="M96 56l34.65 60-38.88 68H184V56z" fill="url(#H)"/><defs><path id="I" d="M96 56l34.65 60-38.88 68H184V56z"/></defs><clipPath id="J"><use xlink:href="#I"/></clipPath><g clip-path="url(#J)"><path d="M21.97 8v108h39.4L96 56h88V8z" fill="#db4437"/><path d="M21.97 8v108h39.4L96 56h88V8z" fill="url(#D)"/></g></g><radialGradient id="K" cx="668.2" cy="55.95" r="84.08" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#3e2723" stop-opacity=".2" offset="0"/><stop stop-color="#3e2723" stop-opacity="0" offset="1"/></radialGradient><g transform="translate(-7 -7)"><path d="M96 56v20.95L174.4 56z" fill="url(#K)" class="B"/><g class="B"><defs><path id="L" d="M21.97 8v40.34L61.36 116 96 56h88V8z"/></defs><clipPath id="M"><use xlink:href="#L"/></clipPath><g clip-path="url(#M)"><use xlink:href="#B" fill="#0f9d58"/><path d="M8 184h83.77l38.88-38.88V116h-69.3L8 24.48z" fill="url(#E)"/></g></g></g><radialGradient id="N" cx="597.9" cy="48.52" r="78.04" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#3e2723" stop-opacity=".2" offset="0"/><stop stop-color="#3e2723" stop-opacity="0" offset="1"/></radialGradient><path transform="translate(-7 -7)" d="M21.97 48.45l57.25 57.24L61.36 116z" fill="url(#N)" class="B"/><radialGradient id="O" cx="671.8" cy="96.14" r="87.87" gradientTransform="translate(-576)" gradientUnits="userSpaceOnUse"><stop stop-color="#263238" stop-opacity=".2" offset="0"/><stop stop-color="#263238" stop-opacity="0" offset="1"/></radialGradient><g transform="translate(-7 -7)"><path d="M91.83 183.9l20.96-78.2 17.86 10.3z" fill="url(#O)" class="B"/><g class="B"><circle cx="96" cy="96" r="40" fill="#f1f1f1"/><circle cx="96" cy="96" r="32" fill="#4285f4"/><path d="M96 55c-22.1 0-40 17.9-40 40v1c0-22.1 17.9-40 40-40h88v-1H96z" class="C E"/><path d="M130.6 116c-6.92 11.94-19.8 20-34.6 20-14.8 0-27.7-8.06-34.6-20h-.04L8 24.48v1L61.4 117c6.92 11.94 19.8 20 34.6 20 14.8 0 27.68-8.05 34.6-20h.05v-1h-.06z" fill="#fff" fill-opacity=".1"/><path d="M97 56c-.17 0-.33.02-.5.03C118.36 56.3 136 74.08 136 96s-17.64 39.7-39.5 39.97c.17 0 .33.03.5.03 22.1 0 40-17.9 40-40s-17.9-40-40-40z" opacity=".1" class="C"/><path d="M131 117.3c3.4-5.88 5.37-12.68 5.37-19.96a39.87 39.87 0 0 0-1.87-12.09c.95 3.42 1.5 7 1.5 10.73 0 7.28-1.97 14.08-5.37 19.96l.02.04-38.88 68h1.16L131 117.3z" fill="#fff" class="E"/><path d="M96 9c48.43 0 87.72 39.13 88 87.5 0-.17.01-.33.01-.5 0-48.6-39.4-88-88-88S8 47.4 8 96c0 .17.01.33.01.5C8.28 48.13 47.57 9 96 9z" fill="#fff" class="E"/><path d="M96 183c48.43 0 87.72-39.13 88-87.5 0 .17.01.33.01.5 0 48.6-39.4 88-88 88S8 144.6 8 96c0-.17.01-.33.01-.5.27 48.37 39.56 87.5 88 87.5z" class="C D"/></g></g></svg>
          </a>
        
      
    </div>
     
    <p>&copy; 2022 <a href="/" target="_blank">juanyi</a></p>

    

    <p>Powered by <a href="https://hexo.io" target="_blank" rel="noopener noreferrer">Hexo</a> Theme - <a href="https://github.com/miiiku/flex-block" target="_blank" rel="noopener noreferrer author">flex-block</a></p>

    <p>
      <a href="javascript:;" id="theme-light">🌞 浅色</a>
      <a href="javascript:;" id="theme-dark">🌛 深色</a>
      <a href="javascript:;" id="theme-auto">🤖️ 自动</a>
    </p>
  </div>
</footer>
  </div>

  <div class="back-to-top-fixed soft-size--round soft-style--box">
    <svg class="icon icon-back-to-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <path d="M725.333333 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333333c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l213.333333 213.333333c17.066667 17.066667 17.066667 42.666667 0 59.733333C746.666667 422.4 738.133333 426.666667 725.333333 426.666667z"></path>
      <path d="M298.666667 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l213.333333-213.333333c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333333C320 422.4 311.466667 426.666667 298.666667 426.666667z"></path>
      <path d="M512 896c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 878.933333 537.6 896 512 896z"></path>
    </svg>
  </div>

  
  <!-- aplayer -->


<!-- dplayer -->




  


  


  




<script src="/project/js/script.js"></script>


  
  <!-- 尾部用户自定义相关内容 -->
</body>
</html>